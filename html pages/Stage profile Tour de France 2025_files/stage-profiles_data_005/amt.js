(()=>{"use strict";var e={8369:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(5765);let i;(0,a(2004).isApiStreamEnabled)("production")&&(i=e=>t=>{const a=t.map(e=>{const{id:t,target:a,adLocation:i,loadingStatus:r,adDimensions:o}=e;return(0,n.addCreativeIdAttributeToAdTarget)(a,t),{id:t,attribute:n.ID_ATTRIBUTE,adLocation:i,loadingStatus:r,adDimensions:o}});e.postMessage(JSON.stringify({type:"ad",data:a}))}),t.default=i},759:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});let n;(0,a(2004).isApiStreamEnabled)("production")&&(n=e=>t=>{e.postMessage(JSON.stringify({type:"event",data:t}))}),t.default=n},6155:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchApiData=t.setupApiStream=t.getCustomEventDetailByAd=void 0;const i=n(a(8369)),r=n(a(759)),o=a(2004),s=a(5151),d=a(850);let c;t.setupApiStream=c;let l=()=>{};t.dispatchApiData=l,(0,o.isApiStreamEnabled)("production")&&(t.setupApiStream=c=()=>{if(window&&window.Worker){const e=new Blob(["onmessage = function(e) { postMessage(e.data) }"]),t=window.URL.createObjectURL(e),a=new window.Worker(t),n=new CustomEvent("amt-api-init",{detail:a});return d.Logger.log("AMT API configured. Events will be dispatched.."),window.dispatchEvent(n),{sendAds:i.default&&(0,i.default)(a),sendEvents:r.default&&(0,r.default)(a)}}return null}),(0,o.isApiStreamEnabled)("production")&&(t.dispatchApiData=l=(e,t,a)=>{var n,i;switch(t){case"ad":null===(n=null==e?void 0:e.sendAds)||void 0===n||n.call(e,a);break;case"event":null===(i=null==e?void 0:e.sendEvents)||void 0===i||i.call(e,a);break;default:d.Logger.log("type is not supported: "+t)}});t.getCustomEventDetailByAd=e=>{var t;const{id:a,target:n}=e,i=e.getAdDimensions();return{id:a,adLocation:(0,s.getAdLocationRelativeToViewport)(e),loadingStatus:null===(t=n.ownerDocument)||void 0===t?void 0:t.readyState,adDimensions:i}}},8903:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;const n=a(6001),i=a(5686),r=a(5782),o=a(4566),s=a(2872),d=a(1371),c=a(686),l=a(9939),u=a(2319),p=a(2004),g=a(8789),m=a(4519),E=a(850),v=a(6155),_=a(6257),A=a(5763),T=a(8298),h=a(297),f=a(6083),I=a(2505),b=a(7656),M=a(2320),y=a(7217);t.app={run:e=>{var t;new n.LogDispatcher({eventBus:i.globalEventBus,apiToken:r.config.logging.token,apiUrl:r.config.logging.apiUrl}).init();const a=(0,o.getCurrentScript)(document);if(a){const e=(0,s.createAmtDomScript)(a);d.systemStore.set("script",e),d.creativeStore.set("entities",(0,c.getEntityInformation)(e)),d.creativeStore.set("richMediaParams",(0,l.getRichMediaQueryParams)(e)),d.creativeStore.set("tagAttributes",(0,u.getTagAttributes)(e)),e.srcString&&d.creativeStore.set("macros",(0,u.getAllPlatformMacros)(e))}(0,p.isApiStreamEnabled)("production")&&d.apiStore.actions.setupVisionProjectApiStream();const S=(0,m.getSupportedDataVendor)(d.systemStore.get("script").srcString),R=d.creativeStore.get("macros").custom,O=d.creativeStore.get("tagAttributes"),w=null==O?void 0:O.code;w&&(E.Logger.log("start to disable dispatching and retrieve tag config..."),d.apiStore.set("disableEventDispatch",!0),(0,u.getTagConfigFromEventCollectionCache)(w,R));const P=(0,u.getTag)(O,r.config.macroTag.defaultConfig,R);if(!R||!P||"cm360"!==P.platform||"x"!==R.attr2&&"/"!==R.attr2)try{if((0,p.isApiStreamEnabled)("production")){const t=d.apiStore.get("apiFeed");t&&(0,v.dispatchApiData)(t,"event",[{phase:_.AMTCustomEventPhase.AMT_ADDED}]),(0,A.addPauseNotificationListener)(e),(0,A.addResumeNotificationListener)(e)}const n=d.creativeStore.get("macros");try{(0,T.checkVpClient)(null===(t=n.common)||void 0===t?void 0:t.referrer,d.vpStore.actions.setVisionProjectEnvironment,e=>{"warn"in e?E.Logger.warn(e.warn):d.vpStore.set("visionProjectClient",e)})}catch(e){E.Logger.error(e.message)}const i=d.creativeStore.get("richMediaParams");if((0,h.isTopWindow)(e)){if(P)return;(0,f.isInjectedAmt)(a)?(E.Logger.debug("amt injected"),(0,I.instantiatePageMode)(n,P,S)):e.document.readyState===b.ReadyState.LOADING?(E.Logger.debug("Setting up event listener"),e.document.addEventListener("DOMContentLoaded",()=>{E.Logger.debug("instantiate page mode in event listener!"),(0,I.instantiatePageMode)(n,P,S)})):(E.Logger.debug("dom already loaded so let's immediately instantiate page mode!"),(0,I.instantiatePageMode)(n,P,S))}else{const e=e=>{(0,M.instantiateCreativeMode)(n,i,P,e)};(0,y.pollFor)(()=>null!==d.vpStore.get("visionProjectClient")||null!==d.vpStore.get("visionProjectEnvironment"),()=>e({name:g.DataVendorName.VISION_PROJECT}),()=>e(S),{interval:100,maxWaitTime:1e3})}}catch(e){E.Logger.error("Error - "+e.message,e)}}}},7402:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(1214),i=a(5732);a(850);let r={macroTag:{defaultConfig:i.developmentMacroTag,apiUrl:"MISSING_ENV_VAR".MACRO_TAG_CONFIG_API_URL||"http://localhost:8888/api/tag/config"},adSampling:{pageMode:100,creativeMode:n.sampleRatesDev},eventCollection:{apiUrl:"MISSING_ENV_VAR".DEV_COLLECTION_API_URL||"http://localhost:8888/api/event",panelStudyApiUrl:"http://localhost:8888/api/panel-studies/event",enabled:"true"==="MISSING_ENV_VAR".DEV_COLLECTION_API_ENABLED,maxSessionLengthSeconds:300,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhbXQiOiJkZXZlbG9wbWVudCJ9.NdM4ErYDSvUnvDpZN05xqiRWKmQ-eYmoH16YVY1ll2w"},qaServer:{url:"http://localhost:3000",path:"/socket"},logging:{apiUrl:"MISSING_ENV_VAR".LOGGING_API_URL||"http://localhost:8888/api/log",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJhbXQtc3RhZ2luZyJ9.M2aYvp29Ht2W3_viaNMJnA92yXjBa_R7-mC7TTP_pLg"}};t.default=r},8916:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(1214),i=a(5732);t.default={macroTag:{defaultConfig:i.productionMacroTag,apiUrl:"https://api.attentionxyz.com/api/tag/config"},adSampling:{pageMode:0,creativeMode:n.sampleRatesProd},eventCollection:{apiUrl:"https://api.attentionxyz.com/api/event",panelStudyApiUrl:"https://api.attentionxyz.com/api/panel-studies/event",enabled:!0,maxSessionLengthSeconds:600,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJhbXQtcHJvZCJ9.8dotrQPk6rXdTZUfYiTmmCx3BKBZ0ngS9huOY_9Rk9s"},qaServer:{url:"https://qatool.decoupled-attention.staging.playground.xyz",path:"/socket"},logging:{apiUrl:"https://api.attentionxyz.com/api/log",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJhbXQtcHJvZCJ9.8dotrQPk6rXdTZUfYiTmmCx3BKBZ0ngS9huOY_9Rk9s"}}},6319:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(1214),i=a(5732);t.default={macroTag:{defaultConfig:i.stagingMacroTag,apiUrl:"https://event-collection-api.decoupled-attention.staging.playground.xyz/api/tag/config"},adSampling:{pageMode:100,creativeMode:n.sampleRatesStg},eventCollection:{apiUrl:"https://event-collection-api.decoupled-attention.staging.playground.xyz/api/event",panelStudyApiUrl:"https://event-collection-api.decoupled-attention.staging.playground.xyz/api/panel-studies/event",enabled:!0,maxSessionLengthSeconds:600,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJhbXQtc3RhZ2luZyJ9.M2aYvp29Ht2W3_viaNMJnA92yXjBa_R7-mC7TTP_pLg"},qaServer:{url:"https://qatool.decoupled-attention.staging.playground.xyz",path:"/socket"},logging:{apiUrl:"https://event-collection-api.decoupled-attention.staging.playground.xyz/api/log",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJhbXQtc3RhZ2luZyJ9.M2aYvp29Ht2W3_viaNMJnA92yXjBa_R7-mC7TTP_pLg"}}},7305:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(1214),i=a(5732);t.default={macroTag:{defaultConfig:i.testingMacroTag,apiUrl:"http://localhost/test"},adSampling:{pageMode:100,creativeMode:n.sampleRatesTest},eventCollection:{apiUrl:"http://localhost/test",panelStudyApiUrl:"http://localhost/panel/test",enabled:!0,maxSessionLengthSeconds:600,token:"some.test.token"}}},5782:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const i=n(a(7402)),r=n(a(8916)),o=n(a(6319)),s=n(a(7305)),d={development:i.default,production:r.default,staging:o.default,testing:s.default};t.config=d.production},4858:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.supportedDataVendors=void 0;const n=a(8789);t.supportedDataVendors=[{name:n.DataVendorName.VISION_PROJECT}]},5128:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.featureConfig=void 0;const n=a(7656);t.featureConfig={browsingFeatures:!0,zoneIntervals:{[n.Zone.TARGET_ZONE]:100,[n.Zone.ZONE_2]:2e3}}},2955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.supportedIABAdFormats=t.SIZE_TOLERANCE=void 0,t.SIZE_TOLERANCE=10,t.supportedIABAdFormats=[{type:"mrec",width:300,height:250,enabled:!0,tolerance:115},{type:"banner",width:320,height:50,enabled:!0,tolerance:80},{type:"half-page",width:300,height:600,enabled:!0,tolerance:25},{type:"leaderboard",width:728,height:90,enabled:!0,tolerance:30},{type:"wide-skyscraper",width:160,height:600,enabled:!0,tolerance:21},{type:"portrait",width:300,height:1050,enabled:!0},{type:"skyscraper",width:120,height:600,enabled:!0},{type:"large-leaderboard",width:970,height:90,enabled:!0},{type:"vertical-banner",width:120,height:240,enabled:!0},{type:"full-banner",width:468,height:60,enabled:!0},{type:"half-banner",width:234,height:60,enabled:!0},{type:"interstitial",width:320,height:480,enabled:!0},{type:"billboard",width:970,height:250,enabled:!0}]},5732:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.testingMacroTag=t.developmentMacroTag=t.stagingMacroTag=t.productionMacroTag=void 0,t.productionMacroTag={global:{sampleRate:.1}},t.stagingMacroTag={global:{sampleRate:1}},t.developmentMacroTag={global:{sampleRate:1}},t.testingMacroTag={global:{sampleRate:1}}},1214:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sampleRatesTest=t.sampleRatesDev=t.sampleRatesStg=t.sampleRatesProd=void 0,t.sampleRatesProd={"a3461db0-9e6c-11eb-ae5d-25d016c269e9":{sampleRate:0},"972ce310-9e6c-11eb-ae5d-25d016c269e9":{sampleRate:0},"8d09fa30-9e6c-11eb-ae5d-25d016c269e9":{sampleRate:0},"7f3ca6f0-9e6c-11eb-ae5d-25d016c269e9":{sampleRate:0},"cb67a520-c405-11eb-b16c-cbc41f50a1d0":{sampleRate:10},"31109490-f967-11eb-9065-41de5c358b0f":{sampleRate:2},"0533ffe0-7566-11eb-94d7-7715e4928253":{sampleRate:0},"12b2e500-7566-11eb-94d7-7715e4928253":{sampleRate:0},"31df3dc0-7566-11eb-94d7-7715e4928253":{sampleRate:0},"459d41e0-7566-11eb-94d7-7715e4928253":{sampleRate:0},"3b593c70-7566-11eb-94d7-7715e4928253":{sampleRate:0},"26f2c350-7566-11eb-94d7-7715e4928253":{sampleRate:0},"43374100-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"4b0e1700-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"5cb940b0-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"6881c340-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"71746980-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"79962b30-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"8792f2e0-8612-11eb-ba88-fba96c750aa4":{sampleRate:0},"8c43a9b0-8612-11eb-ba88-fba96c750aa4":{sampleRate:0}},t.sampleRatesStg={},t.sampleRatesDev={"222lineitem222":{sampleRate:0},"333lineitem333":{sampleRate:50},"555lineitem555":{sampleRate:50},"666lineitem666":{sampleRate:50},"888lineitem888":{sampleRate:50},"999lineitem999":{sampleRate:100}},t.sampleRatesTest={12345:{sampleRate:50},23456:{sampleRate:50}}},5852:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0},4593:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateLoadEventInStoredBatch=t.captureAdLoadEvent=t.getUpdatedTagInCapturing=void 0;const n=a(2731),i=a(8714),r=a(1371),o=a(7471),s=a(850);t.getUpdatedTagInCapturing=(e,t)=>t&&e?Object.assign(Object.assign({},e),{sampleRate:t.sampleRate,overriddenByEntity:t.overriddenByEntity}):e;t.captureAdLoadEvent=(e,t)=>{const a=o.globalEventFactory.create(e,t);r.apiStore.actions.insertRawEvents([a]),(0,n.addToManagedTimelineDispatch)()};t.updateLoadEventInStoredBatch=(e,t,a)=>{const n=e.find(e=>e.type===i.EventType.LOAD_EVENT);if(n&&n.tag){const e=Object.assign(Object.assign({},n),{tag:Object.assign(Object.assign({},n.tag),{sampleRate:t,overriddenByEntity:a})});s.Logger.log("updated load event with tag: ",e.tag),r.apiStore.actions.replaceEventInStoredBatch(e)}}},5856:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialiseBrowsingFeatures=t.captureBrowsingFeatures=t.createInterval=t.createBrowsingFeaturesIntervalCallback=void 0;const n=a(754),i=a(5151),r=a(2731),o=a(8771),s=a(5128),d=a(1519),c=a(7656),l=a(5686),u=a(7471),p=a(1371);t.createBrowsingFeaturesIntervalCallback=e=>()=>{const t=(e=>{const t=[];return p.adStore.queries.adsForZone(e).forEach(e=>{e.isAdTargetValid()?t.push(e):(0,o.removeAdTarget)(e)}),t})(e);if(0===t.length)return;const a=t.map(e=>u.globalEventFactory.create("amt:measure:browsing-features",{id:e.id,browsingFeatures:{scrollPosition:window.top?(0,n.getScrollPosition)(window.top):0,adLocation:(0,i.getAdLocation)(e.target.getBoundingClientRect())}}));p.apiStore.actions.insertIntervalEvents(a),(0,r.batchDispatchIntervalEvents)(),a.forEach(e=>{e.browsingFeatures&&l.globalEventBus.publish("ad:rectangle-change",{adId:e.id,rect:e.browsingFeatures.adLocation})})};t.createInterval=(e,t)=>window.setInterval(e,s.featureConfig.zoneIntervals[t]);t.captureBrowsingFeatures=e=>(0,t.createInterval)((0,t.createBrowsingFeaturesIntervalCallback)(e),e);t.initialiseBrowsingFeatures=e=>{const a=Object.values(c.Zone).map(a=>({id:(0,t.captureBrowsingFeatures)(a),zone:a,mode:e}));p.measurementStore.actions.insertBrowsingDynamicsIntervals(a),(0,d.instantiateZoneCheckingInterval)()}},9032:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.captureGaze=void 0;const n=a(4519);t.captureGaze=function(e,t,a,i){window.top&&Object.values(window.top[n.XYZ_AMT_NAMESPACE].__handlers__).forEach(n=>{if("number"==typeof e||null==e)n(e,t,a,i);else{const{x:t,y:a}=e;n(t,a,"seeso",void 0)}})}},7173:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.processVisionProjectGaze=t.createVisionProjectGazeEvents=void 0;const n=a(2257),i=a(2939),r=a(6155),o=a(6257),s=a(5151),d=a(5686),c=a(2731),l=a(7471),u=a(1371);t.createVisionProjectGazeEvents=e=>e.map(e=>l.globalEventFactory.create("amt:measure:gaze",e));t.processVisionProjectGaze=(e,a,l,p)=>{const g=u.adStore.get("detectedAds"),m=(0,n.getCurrentTimestamp)(),E=g.map(t=>{const n=t.target.getBoundingClientRect(),i=(0,s.getAdLocation)(n);return{id:t.id,timestamp:m,inGaze:t.isInGaze({x:e,y:a}),adLocation:i}});g.forEach(e=>{(0,r.dispatchApiData)(u.apiStore.get("apiFeed"),"event",[Object.assign({phase:o.AMTCustomEventPhase.AMT_GAZE_DATA_RECEIVED,payload:E.filter(t=>t.id===e.id)},(0,r.getCustomEventDetailByAd)(e))])});const v={x:e,y:a,gazeVendor:l,gazeIdentifiers:p},_=(0,i.getValidGazeInput)(v),A=E.map(e=>Object.assign(Object.assign({},e),_)),T=(0,t.createVisionProjectGazeEvents)(A);u.apiStore.actions.insertIntervalEvents(T),(0,c.batchDispatchIntervalEvents)(),d.globalEventBus.publish("vp:gaze",{x:e,y:a,timestamp:m,identifiers:p,vendor:l}),A.forEach(e=>{d.globalEventBus.publish("ad:in-gaze-status",{adId:e.id,inGaze:e.inGaze})})}},300:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialiseDataVendor=void 0;const n=a(8789),i=a(6960);t.initialiseDataVendor=e=>{switch(e){case n.DataVendorName.VISION_PROJECT:(0,i.initialiseVisionProject)()}}},6960:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialiseVisionProject=t.initialiseGazeExposedFunction=void 0;const n=a(9032),i=a(7173),r=a(4519),o=a(6155),s=a(6257),d=a(1371);t.initialiseGazeExposedFunction=()=>{if(!window.top)return;void 0===window.top[r.XYZ_AMT_NAMESPACE]?window.top[r.XYZ_AMT_NAMESPACE]={ongaze:n.captureGaze,__handlers__:{[d.systemStore.get("instanceId")]:i.processVisionProjectGaze}}:window.top[r.XYZ_AMT_NAMESPACE].__handlers__[d.systemStore.get("instanceId")]||(window.top[r.XYZ_AMT_NAMESPACE].__handlers__[d.systemStore.get("instanceId")]=i.processVisionProjectGaze);const e=d.apiStore.get("apiFeed");d.adStore.get("detectedAds").forEach(t=>{(0,o.dispatchApiData)(e,"event",[Object.assign({phase:s.AMTCustomEventPhase.AMT_GLOBAL_HANDLER_INITIALISED},(0,o.getCustomEventDetailByAd)(t))]),window.top&&Object.keys(window.top[r.XYZ_AMT_NAMESPACE].__handlers__).length>0&&(0,o.dispatchApiData)(e,"event",[Object.assign({phase:s.AMTCustomEventPhase.AMT_INTERNAL_HANDLER_ADDED},(0,o.getCustomEventDetailByAd)(t))])})};t.initialiseVisionProject=()=>{(0,t.initialiseGazeExposedFunction)()}},4519:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedDataVendor=t.captureDataVendorFeatureEvents=t.XYZ_AMT_NAMESPACE=void 0;const n=a(300),i=a(4858),r=a(2004),o=a(850);t.XYZ_AMT_NAMESPACE="__xyz_amt__";t.captureDataVendorFeatureEvents=e=>{e&&e.name?(0,n.initialiseDataVendor)(e.name):o.Logger.error("The data vendor is not supported")};t.getSupportedDataVendor=e=>i.supportedDataVendors.find(t=>((0,r.getDataVendorAttribute)(e)||"").indexOf(t.name)>=0)||null},2939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getValidGazeInput=void 0;const a=e=>"number"==typeof e?e:void 0,n=e=>"string"==typeof e?e:void 0;t.getValidGazeInput=e=>{const{x:t,y:i,gazeVendor:r,gazeIdentifiers:o}=e,s={};return s.x=a(t),s.y=a(i),s.gazeVendor=n(r),s.gazeIdentifiers="object"==typeof o&&null!==o?{pageId:n(o.pageId),sessionId:n(o.sessionId),feedId:n(o.feedId),userId:n(o.userId)}:void 0,s}},9400:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.captureEndEvent=void 0;const n=a(2731),i=a(7471),r=a(1371);t.captureEndEvent=(e,t)=>{const a=i.globalEventFactory.create("amt:adswap:end",{id:e.id,endReason:t});r.apiStore.actions.insertRawEvents([a]),(0,n.addToManagedTimelineDispatch)()}},8071:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.captureIntersectionObserverEvents=t.createIntersectionObserverEventHandler=void 0;const n=a(2731),i=a(9590),r=a(2784),o=a(5686),s=a(7471),d=a(1371);t.createIntersectionObserverEventHandler=(e,t)=>a=>{if(d.vpStore.get("adTargetAdSwapStatusMapping")[e.id]!==r.AdSwapStatusEnum.PAUSED){const i=(new Date).getTime(),r=a.map(a=>s.globalEventFactory.create("amt:measure:inview",{ad:e,timestamp:i,inView:a.intersectionRatio,richMediaParams:t}));d.apiStore.actions.insertRawEvents(r),(0,n.addToManagedTimelineDispatch)();const c=a[a.length-1];o.globalEventBus.publish("ad:rectangle-change",{adId:e.id,rect:c.boundingClientRect})}};t.captureIntersectionObserverEvents=(e,a)=>{const n=d.creativeStore.get("richMediaParams");(0,i.instantiateIntersectionObserver)((0,t.createIntersectionObserverEventHandler)(e,n),e,a)}},3691:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSyntheticIntersectionEvents=t.convertLatestIntersectionEventsToSyntheticEvents=t.updateLatestIntersectionEventPerImpression=t.filterTimelineForIntersectionEvents=t.getLatestIntersectionEventPerImpression=void 0;const n=a(2377),i=a(6262),r=a(8714),o=a(2833),s=a(1371);t.getLatestIntersectionEventPerImpression=e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t}),{});t.filterTimelineForIntersectionEvents=e=>e.filter(e=>"number"==typeof e.inView);t.updateLatestIntersectionEventPerImpression=()=>{const e=(0,t.filterTimelineForIntersectionEvents)(s.apiStore.get("rawEventTimeline")),a=(0,t.getLatestIntersectionEventPerImpression)(e);s.measurementStore.actions.insertSyntheticEventLookup(o.SyntheticEventTypes.INTERSECTION,a)};t.convertLatestIntersectionEventsToSyntheticEvents=e=>{const t=s.adStore.get("detectedAds"),a=t.map(e=>e.id),o=s.creativeStore.get("richMediaParams"),{richMediaFormat:d=null}=o||{};return Object.values(e).filter(e=>a.includes(e.id)).map(e=>{const a=t.find(t=>t.id===e.id),o=a?(0,i.getAdFormat)({richMediaFormat:d,target:a.target,window:a.topMostAccessibleFrameWindow}):e.format;return{id:e.id,inView:e.inView,type:r.EventType.MEASURE_EVENT,timestamp:(new Date).getTime(),windowDimensions:(0,n.getWindowDimensions)(window),adDimensions:a?a.getAdDimensions():e.adDimensions,format:o}})};t.getSyntheticIntersectionEvents=()=>{const e=s.measurementStore.get("syntheticEventLookup")[o.SyntheticEventTypes.INTERSECTION];return(0,t.convertLatestIntersectionEventsToSyntheticEvents)(e)}},3383:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pollForVpMetadata=void 0;const n=a(2731),i=a(7217),r=a(7471),o=a(850),s=a(1371),d=["feedId","userId","pageId"],c=["studyId","adCampaignId"],l=(e,t,a)=>{if("object"!=typeof(n=t)||null===n||!d.every(e=>"string"==typeof n[e])||!c.every(e=>["string","undefined"].includes(typeof n[e])))return o.Logger.error("Vision Project data invalid",t),null;var n;const i=[...d,...c].reduce((e,a)=>{var n;return e[a]=null!==(n=t[a])&&void 0!==n?n:null,e},{});return r.globalEventFactory.create("amt:metadata:vision-project-metadata",{id:e.id,vpMetadata:Object.assign(Object.assign({},i),a)})};t.pollForVpMetadata=e=>{if(!e.pageAccess)return void o.Logger.warn("No page access to poll! "+window.location.href);(0,i.pollFor)(()=>{var e;return void 0!==(null===(e=window.top)||void 0===e?void 0:e.__vp_metadata__)},()=>{var t;const a=s.vpStore.get("visionProjectClient");if(null===(t=window.top)||void 0===t?void 0:t.__vp_metadata__){const t=l(e,window.top.__vp_metadata__,a);t&&(s.apiStore.actions.insertRawEvents([t]),(0,n.addToManagedTimelineDispatch)())}},()=>o.Logger.warn("Timeout: VP Metadata"),{interval:500,maxWaitTime:2e4})}},6262:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAdFormat=t.findMatchingIABFormat=void 0;const n=a(6754),i=a(2955);t.findMatchingIABFormat=e=>i.supportedIABAdFormats.find(t=>(0,n.iframeSizeComparison)(e,t));t.getAdFormat=e=>{if(e.richMediaFormat)return e.richMediaFormat;const{target:a}=e,n=(0,t.findMatchingIABFormat)(a);return(null==n?void 0:n.type)||null}},5352:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLocation=void 0;t.getLocation=e=>{if(e.top===e.self)return e.location.href;try{return e.top.location.href}catch(t){return e.document.referrer?e.document.referrer:e.document.URL?e.document.URL:e.document.baseURI?e.document.baseURI:""}}},5151:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAdLocationRelativeToViewport=t.getAdLocation=void 0;const n=a(6257),i=a(2619);t.getAdLocation=e=>({top:Math.round(e.top),left:Math.round(e.left),right:Math.round(e.right),bottom:Math.round(e.bottom),x:Math.round(e.x),y:Math.round(e.y),height:Math.round(e.height),width:Math.round(e.width)});t.getAdLocationRelativeToViewport=e=>{const a=(0,t.getAdLocation)(e.target.getBoundingClientRect()),r=(0,i.getViewportForCreative)(window,e.topMostAccessibleFrameWindow);let o=null;const{left:s,right:d,top:c,bottom:l}=a,{height:u=0}=r||{};return o=l<0?n.LocationRelativeToViewport.ABOVE:c>u?n.LocationRelativeToViewport.BELOW:n.LocationRelativeToViewport.WITHIN,{left:s,right:d,top:c,bottom:l,locationRelativeToViewport:o}}},754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollPosition=void 0;t.getScrollPosition=e=>Math.round(e.scrollY||e.pageYOffset)},2619:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewportForCreative=t.getViewportDimensions=void 0;const n=a(297),i=a(850);t.getViewportDimensions=e=>({width:Math.max(e.document.documentElement.clientWidth,e.innerWidth||0),height:Math.max(e.document.documentElement.clientHeight,e.innerHeight||0)});t.getViewportForCreative=(e,a)=>(0,n.hasPageAccess)(a)&&a.top?(0,t.getViewportDimensions)(a.top):(0,n.hasPageAccess)(e)&&e.top?(0,t.getViewportDimensions)(e.top):(i.Logger.info("No viewport"),null)},2377:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getScreenDimensions=t.getWindowDimensions=void 0;t.getWindowDimensions=e=>({height:e.outerHeight,width:e.outerWidth});t.getScreenDimensions=e=>({height:e.screen.height,width:e.screen.width})},5218:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;t.Store=class{constructor(e){this.get=e=>{if(!(e in this.values))throw new Error("Key does not exist in the store");return this.values[e]},this.getMany=(...e)=>e.reduce((e,t)=>(e[t]=this.get(t),e),{}),this.set=(e,t)=>{if(!(e in this.values))throw new Error("Key does not exist in the store");const a=t instanceof Function?t(this.values[e]):t;return this.values[e]=a,a},this.values=Object.assign({},e)}}},2736:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createStoreAccessor=void 0;const a=e=>t=>Object.fromEntries(Object.entries(t).map(([t,a])=>[t,a(e)]));t.createStoreAccessor=e=>t=>({get:e.get,getMany:e.getMany,set:e.set,queries:a(e)(t.queries),actions:a(e)(t.actions)})},5980:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventBus=void 0;t.EventBus=class{constructor(){this.callbacks={},this.publish=(e,t)=>{const a=this.callbacks[e];if(null==a?void 0:a.length)for(let e=0;e<a.length;e++)a[e](t)},this.subscribe=(e,t)=>{this.callbacks[e]?this.callbacks[e].find(e=>e===t)||this.callbacks[e].push(t):this.callbacks[e]=[t]},this.unsubscribe=(e,t)=>{this.callbacks[e]&&(this.callbacks[e]=this.callbacks[e].filter(e=>e!==t))}}}},7258:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;t.Factory=class{constructor(e){this.create=(e,...t)=>{if(!this.constructors[e])throw new TypeError(`Constructor for "${e}" not found`);return this.constructors[e](...t)},this.constructors=e.constructors}}},2320:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.instantiateCreativeMode=t.instantiateEventCollection=void 0;const n=a(5128),i=a(5782),r=a(8071),o=a(5856),s=a(4593),d=a(9365),c=a(297),l=a(6754),u=a(1371),p=a(5765),g=a(2319),m=a(8771),E=a(1630),v=a(4519),_=a(8723),A=a(7656),T=a(6155),h=a(6257),f=a(3383),I=a(6262),b=a(5686),M=a(2731),y=a(7995),S=a(850),R=a(686);t.instantiateEventCollection=(e,t)=>{(0,m.initialiseAdSession)(e),(0,r.captureIntersectionObserverEvents)(e,_.Mode.CREATIVE),[A.PageAccessType.FULL,A.PageAccessType.PARTIAL].includes(e.pageAccessType)&&(S.Logger.log("Data vendor name identified: "+(null==t?void 0:t.name)),S.Logger.log("Current creative ad id: "+e.id),(0,v.captureDataVendorFeatureEvents)(t),e.pageAccessType===A.PageAccessType.FULL&&n.featureConfig.browsingFeatures&&e.zone&&(0,o.initialiseBrowsingFeatures)(_.Mode.CREATIVE))};const O=(e,t)=>{var a;if("gumgum"===(null==t?void 0:t.richMediaVendor)){const n=null===(a=e.target.parentElement)||void 0===a?void 0:a.getAttribute("style");if(n){const e=t.richMediaFormat||"unknown-format",a=(()=>{var e,t;try{if("timeOrigin"in window.performance)return null===(e=window.top)||void 0===e?void 0:e.performance.timeOrigin;if("timing"in window.performance)return null===(t=window.top)||void 0===t?void 0:t.performance.timing.navigationStart}catch(e){return S.Logger.error("Could not get page start timestamp",e),0}})();return(0,y.hashString)(`${a}${e}${n}`)}}return null};t.instantiateCreativeMode=(e,a,n,r)=>{const o=u.creativeStore.get("entities");(0,T.dispatchApiData)(u.apiStore.get("apiFeed"),"event",[{phase:h.AMTCustomEventPhase.AMT_LOADED_TO_CREATIVE_MODE}]);const{richMediaFormat:m=null,richMediaPart:v=null}=a||{},A=(0,l.getTopMostAccessibleParentIframeWindow)(window),y=(0,d.getAdTarget)(A),w=(0,c.hasPageAccess)(A),P=(0,d.getPageAccessType)(window,A),D=_.Mode.CREATIVE;A.__amt_mode__=D;const L={target:y,format:(0,I.getAdFormat)({richMediaFormat:m,target:y,window:A}),pageAccess:w,topMostAccessibleFrameWindow:A,pageAccessType:P,part:v},N=(0,d.getAd)(a,L,null==n?void 0:n.code);if(b.globalEventBus.publish("debug:impressionId",{impressionId:N.id}),window.addEventListener("pagehide",()=>{b.globalEventBus.publish("ad:removed",{adId:N.id})}),window.addEventListener("visibilitychange",()=>{"hidden"!==document.visibilityState||u.apiStore.get("disableEventDispatch")||((0,M.dispatchLatestSyntheticIntersectionEvents)(),(0,M.cleanUpEventTimelines)())}),(0,p.addCreativeIdAttributeToAdTarget)(N.target,N.id),"string"==typeof(null==o?void 0:o.campaignId)&&!(0,R.isValidCampaign)(o.campaignId))return void S.Logger.warn("Invalid campaign detected. Exiting.",{campaignId:o.campaignId});const C=(0,E.getSampleRateForCreative)(i.config.adSampling.creativeMode,o);if(!(0,E.applySampling)(C))return;if(e.custom){const t=e.custom[g.ADVERTISER_ENTITY_KEY];t&&u.creativeStore.set("advertiserExtCode",t)}const V=(new Date).getTime();u.adStore.actions.insertAds([N]),a&&u.creativeStore.set("richMediaParams",a);const j=O(N,a);(0,s.captureAdLoadEvent)("amt:load:creative",{ad:N,entities:o,instantiationTimestamp:V,requiredMacros:e.common,customMacroValues:e.custom,sampleRate:C,dataVendor:r,tag:n,richMediaParams:a,groupKey:j}),(0,T.dispatchApiData)(u.apiStore.get("apiFeed"),"event",[Object.assign({phase:h.AMTCustomEventPhase.AMT_INITIALISE_ADS},(0,T.getCustomEventDetailByAd)(N))]),N.waitForIframeReady(()=>{(0,T.dispatchApiData)(u.apiStore.get("apiFeed"),"event",[Object.assign({phase:h.AMTCustomEventPhase.AMT_INITIALISE_EVENT_COLLECTION},(0,T.getCustomEventDetailByAd)(N))]),(0,t.instantiateEventCollection)(N,r)}),(0,f.pollForVpMetadata)(N)}},2505:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.instantiatePageMode=t.createMutationHandler=t.attachLoadedAds=t.initialiseDetectedAd=t.instantiateEventCollection=void 0;const n=a(5782),i=a(6754),r=a(9365),o=a(8142),s=a(4593),d=a(5856),c=a(8071),l=a(1371),u=a(1630),p=a(5765),g=a(8771),m=a(4519),E=a(7656),v=a(8723),_=a(6155),A=a(6257),T=a(2004),h=a(3383),f=a(5686),I=a(850),b=a(2731);t.instantiateEventCollection=(e,t)=>{(0,g.initialiseAdSession)(e),(0,c.captureIntersectionObserverEvents)(e,v.Mode.PAGE),(0,m.captureDataVendorFeatureEvents)(t)};t.initialiseDetectedAd=(e,a,i,r,d)=>{const c=(0,p.getCreativeModeAttributes)(e.target);if((0,T.isApiStreamEnabled)("production")){const t=new MutationObserver((0,o.createAdSwapMutationHandler)(a,i,r,d));t.observe(e.target,o.AD_SWAP_MUTATION_OBSERVER_CONFIG),window.setTimeout(()=>{t.disconnect()},6e4)}const g=(0,T.isValidInternalDataVendor)(d);if(!(r||c&&c.id||g||(0,u.applySampling)(n.config.adSampling.pageMode)))return;l.adStore.actions.insertAds([e]);const m=g?u.INTERNAL_DATA_VENDOR_SAMPLE_RATE:(0,u.getSampleRateForPage)(n.config.adSampling.pageMode);(0,s.captureAdLoadEvent)("amt:load:page",{ad:e,entities:l.creativeStore.get("entities"),instantiationTimestamp:a,creativeModeAttributes:c,customMacroValues:i.custom,sampleRate:m,dataVendor:d,tag:r}),(0,_.dispatchApiData)(l.apiStore.get("apiFeed"),"event",[Object.assign({phase:A.AMTCustomEventPhase.AMT_INITIALISE_ADS},(0,_.getCustomEventDetailByAd)(e))]),e.waitForIframeReady(()=>{(0,_.dispatchApiData)(l.apiStore.get("apiFeed"),"event",[Object.assign({phase:A.AMTCustomEventPhase.AMT_INITIALISE_EVENT_COLLECTION},(0,_.getCustomEventDetailByAd)(e))]),(0,t.instantiateEventCollection)(e,d)}),f.globalEventBus.publish("ad:detected",{adId:e.id})};t.attachLoadedAds=(e,a,n,i,o)=>{const s={pageAccess:!0,topMostAccessibleFrameWindow:window,pageAccessType:E.PageAccessType.FULL},d=(0,r.constructDisplayAds)(e,s);I.Logger.log(`Attaching ${d.length} new ad targets`),d.forEach(e=>{(0,t.initialiseDetectedAd)(e,a,n,i,o),(0,h.pollForVpMetadata)(e)})};t.createMutationHandler=(e,a,n,r)=>o=>{o.forEach(o=>{if("childList"===o.type){const s=(0,i.filterIframes)(o.addedNodes),d=(0,i.filterIframesForSupportedAds)(s);d.length&&(0,t.attachLoadedAds)(d,e,a,n,r);const c=(0,i.filterIframes)(o.removedNodes);if(c.length){const e=l.adStore.get("detectedAds");for(const t of c){const a=e.find(e=>e.target===t);a&&f.globalEventBus.publish("ad:removed",{adId:a.id})}}}})};t.instantiatePageMode=(e,a,n)=>{(0,_.dispatchApiData)(l.apiStore.get("apiFeed"),"event",[{phase:A.AMTCustomEventPhase.AMT_LOADED_TO_PAGE_MODE}]),window.__amt_mode__=v.Mode.PAGE;const s=(new Date).getTime(),c=document.getElementsByTagName("body")[0];new MutationObserver((0,t.createMutationHandler)(s,e,a,n)).observe(c,o.DEFAULT_MUTATION_OBSERVER_CONFIG),(0,d.initialiseBrowsingFeatures)(v.Mode.PAGE),window.addEventListener("visibilitychange",()=>{"hidden"!==document.visibilityState||l.apiStore.get("disableEventDispatch")||((0,b.dispatchLatestSyntheticIntersectionEvents)(),(0,b.cleanUpEventTimelines)())});const u=(0,i.findSupportedAds)(window),p={pageAccess:!0,topMostAccessibleFrameWindow:window,pageAccessType:E.PageAccessType.FULL},g=(0,r.constructDisplayAds)(u,p);0!==g.length&&g.forEach(i=>{(0,t.initialiseDetectedAd)(i,s,e,a,n),(0,h.pollForVpMetadata)(i)})}},8426:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0;const i=a(6155),r=a(1371);t.actions={insertAds:({set:e})=>t=>{e("detectedAds",e=>[...e,...t]),(0,i.dispatchApiData)(r.apiStore.get("apiFeed"),"ad",t.map(e=>{const t=(0,i.getCustomEventDetailByAd)(e),a=n(t||{},[]);return delete a.id,Object.assign(Object.assign({},e),a)}))},replaceAd:({set:e})=>t=>{e("detectedAds",e=>{const a=e.findIndex(e=>e.id===t.id);return a>-1&&e.splice(a,1,t),e})},removeAd:({set:e})=>t=>{e("detectedAds",e=>e.filter(e=>e.id!==t.id))}}},8750:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0,t.defaultValues={detectedAds:[]}},336:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9261:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(8426)),s=r(a(9114)),d=r(a(336)),c=r(a(8750));t.default=Object.assign(Object.assign(Object.assign(Object.assign({},o),s),d),c)},9114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queries=void 0;t.queries={adsForZone:({get:e})=>t=>e("detectedAds").filter(e=>e.zone===t)}},3127:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0;const n=a(6155),i=a(2784),r=a(1371);t.actions={insertRawEvents:({set:e,get:t})=>a=>{e("rawEventTimeline",e=>[...e,...a]),(0,n.dispatchApiData)(t("apiFeed"),"event",a)},removeRawEvents:({set:e,get:t})=>a=>{const n=t("rawEventTimeline").slice(0,a);return e("rawEventTimeline",e=>[...e.slice(a)]),n},insertIntervalEvents:({set:e,get:t})=>a=>{const o=a.filter(e=>r.vpStore.get("adTargetAdSwapStatusMapping")[e.id]!==i.AdSwapStatusEnum.PAUSED);e("intervalEventTimeline",e=>[...e,...o]),(0,n.dispatchApiData)(t("apiFeed"),"event",a)},removeIntervalEvents:({set:e,get:t})=>a=>{const n=t("intervalEventTimeline").slice(0,a);return e("intervalEventTimeline",e=>[...e.slice(a)]),n},insertSyntheticEvents:({set:e,get:t})=>a=>{const o=a.filter(e=>r.vpStore.get("adTargetAdSwapStatusMapping")[e.id]!==i.AdSwapStatusEnum.PAUSED);e("syntheticEventTimeline",e=>[...e,...o]),(0,n.dispatchApiData)(t("apiFeed"),"event",a)},removeSyntheticEvents:({set:e,get:t})=>a=>{const n=t("syntheticEventTimeline").slice(0,a);return e("syntheticEventTimeline",e=>[...e.slice(a)]),n},insertStoredBatch:({set:e})=>t=>{e("storedBatch",e=>[...e,...t])},replaceEventInStoredBatch:({set:e})=>t=>{e("storedBatch",e=>{const a=e.findIndex(e=>e.id===t.id);return a>-1&&e.splice(a,1,t),e})},removeStoredBatch:({set:e,get:t})=>a=>{const n=t("storedBatch").slice(0,a);return e("storedBatch",e=>[...e.slice(a)]),n},setupVisionProjectApiStream:({set:e})=>()=>{e("apiFeed",n.setupApiStream&&(0,n.setupApiStream)())}}},7426:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0,t.defaultValues={rawEventTimeline:[],intervalEventTimeline:[],syntheticEventTimeline:[],storedBatch:[],apiFeed:null,disableEventDispatch:!1}},433:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4926:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(3127)),s=r(a(3840)),d=r(a(433)),c=r(a(7426));t.default=Object.assign(Object.assign(Object.assign(Object.assign({},o),s),d),c)},3840:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queries=void 0,t.queries={}},9308:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0,t.actions={}},9919:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0,t.defaultValues={advertiserExtCode:null,tagSamplingAttributes:null,richMediaParams:null,entities:null,macros:{common:{referrer:null},custom:{}},tagAttributes:{code:null,label:null}}},9609:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8360:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(9308)),s=r(a(8960)),d=r(a(9609)),c=r(a(9919));t.default=Object.assign(Object.assign(Object.assign(Object.assign({},o),s),d),c)},8960:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queries=void 0,t.queries={}},6745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0;t.actions={insertBrowsingDynamicsIntervals:({set:e})=>t=>{e("browsingDynamicsIntervals",e=>[...e,...t])},insertSyntheticEventLookup:({set:e})=>(t,a)=>{e("syntheticEventLookup",e=>(e[t]=Object.assign(Object.assign({},e[t]),a),e))},insertIntersectionObserver:({set:e})=>(t,a)=>{e("intersectionObservers",e=>{const n=e[t.id];return e[t.id]=n?n.concat(a):[a],e})},removeIntersectionObserver:({set:e})=>t=>{e("intersectionObservers",e=>{const a=e[t.id];return null==a||a.forEach(e=>e.disconnect()),delete e[t.id],e})},removeBrowsingDynamicsInterval:({set:e})=>t=>{e("browsingDynamicsIntervals",e=>e.filter(e=>e.id!==t.id))}}},5973:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0,t.defaultValues={browsingDynamicsIntervals:[],syntheticEventLookup:{intersection:{}},intersectionObservers:{}}},9660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9010:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(6745)),s=r(a(1613)),d=r(a(9660)),c=r(a(5973));t.default=Object.assign(Object.assign(Object.assign(Object.assign({},o),s),d),c)},1613:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queries=void 0;t.queries={intersectionObservers:({get:e})=>t=>e("intersectionObservers")[t.id]||[],browsingDynamicsIntervals:({get:e})=>()=>e("browsingDynamicsIntervals").map(e=>Object.assign({},e))}},5583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0,t.actions={}},5061:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0;const n=a(4733);t.defaultValues={instanceId:(0,n.uuidv4)(),script:{element:void 0,srcString:null,queryParams:new URLSearchParams,attributes:{},pathname:null}}},9331:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6573:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(5583)),s=r(a(8051)),d=r(a(9331)),c=r(a(5061));t.default=Object.assign(Object.assign(Object.assign(Object.assign({},o),s),d),c)},8051:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queries=void 0,t.queries={}},8406:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0;t.actions={setAdTargetAdSwapStatus:e=>(t,a)=>{e.set("adTargetAdSwapStatusMapping",e=>(e[t]=a,e))},setVisionProjectEnvironment:e=>t=>{e.set("visionProjectEnvironment",t)}}},9701:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValues=void 0,t.defaultValues={visionProjectClient:null,visionProjectEnvironment:null,adTargetAdSwapStatusMapping:{}}},3589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3211:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(8406)),s=r(a(9877)),d=r(a(3589)),c=r(a(9701));t.default=Object.assign(Object.assign(Object.assign(Object.assign({},o),s),d),c)},9877:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queries=void 0,t.queries={}},9809:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.storeFactory=void 0;const i=a(7258),r=a(5218),o=a(2736),s=n(a(9261)),d=n(a(4926)),c=n(a(8360)),l=n(a(9010)),u=n(a(6573)),p=n(a(3211)),g=e=>{const t=new r.Store(e.defaultValues);return()=>(0,o.createStoreAccessor)(t)(Object.assign({},e))};t.storeFactory=new i.Factory({constructors:{api:g(d.default),ad:g(s.default),visionProject:g(p.default),system:g(u.default),creative:g(c.default),measurement:g(l.default)}})},7656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdClassType=t.ReadyState=t.EventListenerType=t.SuperSkinV2Part=t.Zone=t.PageAccessType=void 0,function(e){e.FULL="full",e.PARTIAL="partial",e.RESTRICTED="restricted"}(t.PageAccessType||(t.PageAccessType={})),function(e){e.TARGET_ZONE="target_zone",e.ZONE_2="zone_2"}(t.Zone||(t.Zone={})),function(e){e.HERO="hero",e.BANNER="banner"}(t.SuperSkinV2Part||(t.SuperSkinV2Part={})),function(e){e.LOAD="load"}(t.EventListenerType||(t.EventListenerType={})),function(e){e.LOADING="loading",e.INTERACTIVE="interactive",e.COMPLETE="complete"}(t.ReadyState||(t.ReadyState={})),function(e){e.DISPLAY="display",e.GUMGUM_IN_SCREEN_FRAME="gumgum:in-screen-frame:in-screen-frame",e.GUMGUM_IN_SCREEN_FRAME_NEW="71-5aa35650:35",e.JP_MOBILE_SCROLLER_MAIN="jp:is:main",e.JP_MOBILE_SCROLLER_MAIN_NEW_NO_PART="71-5aa35650:46",e.JP_MOBILE_SCROLLER_MAIN_NEW="71-5aa35650:46:main",e.JP_MOBILE_SKIN_MAIN="jp:mt:main",e.JP_MOBILE_SKIN_MAIN_NEW="71-5aa35650:59:main",e.CELTRA_INTERSCROLLER="celtra:interscroller:main",e.CELTRA_INTERSCROLLER_V1="celtra:v1",e.CELTRA_INTERSCROLLER_V2="celtra:v2",e.CELTRA_INTERSCROLLER_V3="celtra:v3",e.PXYZ_VELOCITY="playgroundxyz:velocity:ad",e.PXYZ_VELOCITY_NEW="71-5aa35650:62"}(t.AdClassType||(t.AdClassType={}))},2784:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdSwapNotificationEnum=t.AdSwapStatusEnum=void 0,function(e){e.PAUSED="PAUSED",e.RESUMED="RESUMED"}(t.AdSwapStatusEnum||(t.AdSwapStatusEnum={})),function(e){e.PAUSE="adsw-disable-amt-ongaze-events",e.RESUME="adsw-enable-amt-ongaze-events"}(t.AdSwapNotificationEnum||(t.AdSwapNotificationEnum={}))},6257:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XMLHttpRequestReadyState=t.LocationRelativeToViewport=t.AMTCustomEventPhase=void 0,function(e){e.AMT_ADDED="AMT added to the page",e.AMT_LOADED_TO_PAGE_MODE="AMT loaded (page mode)",e.AMT_LOADED_TO_CREATIVE_MODE="AMT loaded (creative mode)",e.AMT_GLOBAL_HANDLER_INITIALISED="AMT global handler initialised",e.AMT_INTERNAL_HANDLER_ADDED="AMT internal handler added",e.AMT_GAZE_DATA_RECEIVED="AMT gaze data received",e.AMT_INITIALISE_ADS="AMT initialise ads",e.AMT_INITIALISE_EVENT_COLLECTION="AMT initalise event collection",e.AMT_CAPTURE_EVENTS="AMT capture events"}(t.AMTCustomEventPhase||(t.AMTCustomEventPhase={})),function(e){e.ABOVE="above",e.WITHIN="within",e.BELOW="below"}(t.LocationRelativeToViewport||(t.LocationRelativeToViewport={})),function(e){e[e.UNSENT=0]="UNSENT",e[e.OPENED=1]="OPENED",e[e.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",e[e.LOADING=3]="LOADING",e[e.DONE=4]="DONE"}(t.XMLHttpRequestReadyState||(t.XMLHttpRequestReadyState={}))},3956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0,function(e){e.PRODUCTION="production",e.STAGING="staging",e.DEVELOPMENT="development",e.TESTING="testing"}(t.Environment||(t.Environment={}))},8789:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataVendorFeature=t.DataVendorName=void 0,function(e){e.VISION_PROJECT="vision-project"}(t.DataVendorName||(t.DataVendorName={})),function(e){e.GAZE="gaze"}(t.DataVendorFeature||(t.DataVendorFeature={}))},5221:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EndReason=void 0,function(e){e.AD_SWAP="AD_SWAP"}(t.EndReason||(t.EndReason={}))},8063:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.busFactory=void 0;const n=a(7258),i=a(5980);t.busFactory=new n.Factory({constructors:{global:()=>new i.EventBus}})},2833:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyntheticEventTypes=void 0,function(e){e.INTERSECTION="intersection"}(t.SyntheticEventTypes||(t.SyntheticEventTypes={}))},5628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0,function(e){e.DEBUG="debug",e.INFO="info",e.LOG="log",e.WARN="warn",e.ERROR="error"}(t.LOG_LEVEL||(t.LOG_LEVEL={}))},8714:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventType=void 0,function(e){e.LOAD_EVENT="LOAD_EVENT",e.MEASURE_EVENT="MEASURE_EVENT",e.END_EVENT="END_EVENT",e.VISION_PROJECT_METADATA_EVENT="VISION_PROJECT_METADATA_EVENT"}(t.EventType||(t.EventType={}))},8723:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,function(e){e.CREATIVE="creative",e.PAGE="page"}(t.Mode||(t.Mode={}))},539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RichMediaAttributes=t.RichMediaVendor=void 0,function(e){e.PLAYGROUNDXYZ="playgroundxyz",e.GUMGUM="gumgum",e.JUST_PREMIUM="jp"}(t.RichMediaVendor||(t.RichMediaVendor={})),function(e){e.RICH_MEDIA_FORMAT="richMediaFormat",e.RICH_MEDIA_PART="richMediaPart",e.RICH_MEDIA_VENDOR="richMediaVendor"}(t.RichMediaAttributes||(t.RichMediaAttributes={}))},9365:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAdTarget=t.getPageAccessType=t.constructDisplayAds=t.getAd=void 0;const n=a(7656),i=a(297),r=a(6262),o=a(4279),s=["71-5aa35650"];t.getAd=(e,t,a)=>{try{const{richMediaVendor:n,richMediaFormat:i,richMediaPart:r}=e||{};if(a&&s.includes(a))try{const e=[a,i,r].filter(Boolean).join(":");return o.adFactory.create(e,t)}catch(e){}const d=[n,i,r].filter(Boolean).join(":");return o.adFactory.create(d,t)}catch(e){return o.adFactory.create(n.AdClassType.DISPLAY,t)}};t.constructDisplayAds=(e,t)=>e.map(e=>{const a=(0,r.getAdFormat)({richMediaFormat:null,target:e,window:t.topMostAccessibleFrameWindow}),i=Object.assign({target:e,format:a},t);return o.adFactory.create(n.AdClassType.DISPLAY,i)});t.getPageAccessType=(e,t)=>(0,i.hasPageAccess)(t)?n.PageAccessType.FULL:(0,i.hasPageAccess)(e)&&t!==e?n.PageAccessType.PARTIAL:n.PageAccessType.RESTRICTED;t.getAdTarget=e=>e.frameElement?e.frameElement:e.document.body},4279:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.adFactory=void 0;const n=a(7656),i=a(7258),r=a(3655),o=a(4733),s=a(1519),d=a(8391),c=a(81),l=a(9623),u=a(435),p=e=>{const t=(0,s.getAdInitialZone)(e);return new d.InScreenFrame(Object.assign(Object.assign({},e),{id:(0,o.uuidv4)(),zone:t}))},g=e=>{const t=(0,s.getAdInitialZone)(e);return new c.JustPremiumFixedAd(Object.assign(Object.assign({},e),{id:(0,o.uuidv4)(),zone:t}))},m=e=>{const t=(0,s.getAdInitialZone)(e);return new l.Interscroller(Object.assign(Object.assign({},e),{id:(0,o.uuidv4)(),zone:t}))},E=e=>{const t=(0,s.getAdInitialZone)(e);return new u.VelocityAd(Object.assign(Object.assign({},e),{id:(0,o.uuidv4)(),zone:t}))},v={[n.AdClassType.DISPLAY]:e=>{const t=(0,o.uuidv4)(),a=(0,s.getAdInitialZone)(e);return new r.DisplayAd(Object.assign(Object.assign({},e),{zone:a,id:t}))},[n.AdClassType.GUMGUM_IN_SCREEN_FRAME]:p,[n.AdClassType.GUMGUM_IN_SCREEN_FRAME_NEW]:p,[n.AdClassType.JP_MOBILE_SCROLLER_MAIN]:g,[n.AdClassType.JP_MOBILE_SCROLLER_MAIN_NEW_NO_PART]:g,[n.AdClassType.JP_MOBILE_SCROLLER_MAIN_NEW]:g,[n.AdClassType.JP_MOBILE_SKIN_MAIN]:g,[n.AdClassType.JP_MOBILE_SKIN_MAIN_NEW]:g,[n.AdClassType.CELTRA_INTERSCROLLER]:m,[n.AdClassType.CELTRA_INTERSCROLLER_V1]:m,[n.AdClassType.CELTRA_INTERSCROLLER_V2]:m,[n.AdClassType.CELTRA_INTERSCROLLER_V3]:m,[n.AdClassType.PXYZ_VELOCITY]:E,[n.AdClassType.PXYZ_VELOCITY_NEW]:E};t.adFactory=new i.Factory({constructors:v})},7140:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAd=void 0;const n=a(7656),i=a(8723),r=a(850),o=a(9716);t.BaseAd=class{constructor(e){var t;this.format=null,this.part=null,this.getAdDimensions=()=>(this.adRect=this.target.getBoundingClientRect(),{height:Math.round(this.adRect.height),width:Math.round(this.adRect.width)}),this.id=e.id,this.target=e.target,this.format=e.format,this.pageAccess=e.pageAccess,this.topMostAccessibleFrameWindow=e.topMostAccessibleFrameWindow,this.pageAccessType=e.pageAccessType,this.part=null!==(t=e.part)&&void 0!==t?t:null,this.adRect=e.target.getBoundingClientRect(),"none"===getComputedStyle(this.target).pointerEvents&&(this.target.style.pointerEvents="auto")}isInGaze(e){var t;const{x:a,y:n}=e;if(void 0===a||void 0===n)return!1;if(this.adRect=this.target.getBoundingClientRect(),!o.MathUtils.isIntersecting(e,this.adRect))return!1;const i=null===(t=window.top)||void 0===t?void 0:t.document.elementFromPoint(a,n);return!i||i===this.target}waitForIframeReady(e,t){var a;const o=null!=t?t:this.target;return o.ownerDocument?(r.Logger.log("Ad target state: "+o.ownerDocument.readyState),o.ownerDocument.readyState===n.ReadyState.COMPLETE||(null===(a=o.contentDocument)||void 0===a?void 0:a.readyState)===n.ReadyState.COMPLETE?e():void([n.ReadyState.LOADING,n.ReadyState.INTERACTIVE].includes(o.ownerDocument.readyState)&&o.addEventListener(n.EventListenerType.LOAD,()=>e(),{capture:this.topMostAccessibleFrameWindow.__amt_mode__===i.Mode.CREATIVE,once:!0}))):e()}isAdTargetValid(){const e=this.target.getBoundingClientRect();return e.width>0&&e.height>0&&e.top!==e.bottom&&e.left!==e.right}}},9623:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Interscroller=void 0;const n=a(850),i=a(4446);class r extends i.InternalTargetAd{constructor(e){super(e),this.getInternalAdTarget=()=>{try{const e=this.topMostAccessibleFrameWindow.parent.document.querySelector(".celtra-clipper");return e||(n.Logger.error.withScope("celtra",'Target element not found using query selector ".celtra-clipper"'),this.target)}catch(e){return n.Logger.error.withScope("celtra","Error when accessing the ad frame's parent div element with class .celtra-clipper",e),this.target}},this.target=this.getInternalAdTarget()}}t.Interscroller=r},3655:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayAd=void 0;const i=a(7140);class r extends i.BaseAd{constructor(e){const{zone:t}=e;super(n(e,["zone"])),this.getAdDimensions=()=>{if("IFRAME"===this.target.tagName&&this.pageAccess){const e=this.target.getBoundingClientRect();return{height:Math.round(e.height||this.target.offsetHeight||this.target.clientHeight)||0,width:Math.round(e.width||this.target.offsetWidth||this.target.clientWidth)||0}}return{height:Math.round(this.topMostAccessibleFrameWindow.innerHeight)||0,width:Math.round(this.topMostAccessibleFrameWindow.innerWidth)||0}},this.zone=t}isAdTargetValid(){return"IFRAME"===this.target.tagName&&super.isAdTargetValid()}}t.DisplayAd=r},8391:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InScreenFrame=void 0;const n=a(3655),i=a(9716);class r extends n.DisplayAd{constructor(e){super(e),this.isExpanded=!1,this.calculateHotspots=()=>[new DOMRect(0,0,window.innerWidth,60),new DOMRect(0,0,60,window.innerHeight),new DOMRect(window.innerWidth-60,0,60,window.innerHeight),new DOMRect(0,window.innerHeight-100,window.innerWidth,100)];this.resizeObserver=new ResizeObserver(e=>{const t=e[0],{height:a}=t.contentRect;this.isExpanded=100!==a}),this.resizeObserver.observe(this.target)}isInGaze(e){if(this.isExpanded){if("number"!=typeof e.x||"number"!=typeof e.y)return!1;this.adRect=this.target.getBoundingClientRect();return this.calculateHotspots().some(t=>i.MathUtils.isIntersecting(e,t))}return super.isInGaze(e)}}t.InScreenFrame=r},4446:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalTargetAd=void 0;const i=a(9716),r=a(7140);class o extends r.BaseAd{constructor(e){const{zone:t}=e;super(n(e,["zone"])),this.zone=t,this.iframe=this.target}isInGaze(e){const{x:t,y:a}=e;return void 0!==t&&void 0!==a&&(this.adRect=this.target.getBoundingClientRect(),i.MathUtils.isIntersecting(e,this.adRect))}waitForIframeReady(e){this.resizeObserver=new ResizeObserver(()=>{var t;this.isAdTargetValid()&&(null===(t=this.resizeObserver)||void 0===t||t.disconnect(),super.waitForIframeReady(e,this.iframe))}),this.resizeObserver.observe(this.target)}}t.InternalTargetAd=o},81:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JustPremiumFixedAd=void 0;const n=a(850),i=a(4446),r=a(5686);class o extends i.InternalTargetAd{constructor(e){super(e),this.getInternalAdTarget=()=>{const e=e=>{const t="Could not access the ad frame's parent div element with class jpx-<code>-container. "+(null!=e?e:"");r.globalEventBus.publish("log:dispatch",{message:{scope:"just-premium",detail:t},level:"error"}),n.Logger.error.withScope("just-premium",t)},t=e=>{const t=Array.from(e.classList);for(const e of t)if(e.startsWith("jpx-")&&e.endsWith("-container"))return!0;return!1};try{const a=this.topMostAccessibleFrameWindow.parent.document.querySelectorAll('div[class^="jpx-"]'),n=Array.from(a).find(t);return n||(e(),this.target)}catch(t){return e(t.message),this.target}},this.target=this.getInternalAdTarget()}}t.JustPremiumFixedAd=o},435:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VelocityAd=void 0;const n=a(850),i=a(4446);class r extends i.InternalTargetAd{constructor(e){super(e),this.getInternalAdTarget=()=>{const e="#aip-tracking";try{const t=this.topMostAccessibleFrameWindow.parent.document.querySelector(e);return t||(n.Logger.error.withScope("playground",`Target element not found using query selector "${e}"`),this.target)}catch(t){return n.Logger.error.withScope("playground","Error when accessing the internal div element with id "+e,t),this.target}},this.target=this.getInternalAdTarget()}}t.VelocityAd=r},8771:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialiseAdSession=t.adSessionTimeoutHandler=t.endAdSession=t.removeAdTarget=void 0;const n=a(5782),i=a(8723),r=a(6155),o=a(6257),s=a(850),d=a(2731),c=a(1371);t.removeAdTarget=e=>{s.Logger.log("Removing ad target - "+e.id),c.adStore.actions.removeAd(e),c.measurementStore.actions.removeIntersectionObserver(e)};t.endAdSession=e=>{if((0,d.dispatchLatestSyntheticIntersectionEvents)(),(0,d.cleanUpEventTimelines)(),(0,t.removeAdTarget)(e),window.__amt_mode__===i.Mode.CREATIVE){c.measurementStore.queries.browsingDynamicsIntervals().forEach(e=>{c.measurementStore.actions.removeBrowsingDynamicsInterval(e),clearInterval(e.id)})}};t.adSessionTimeoutHandler=e=>()=>{s.Logger.log("Maximum ad session length has been reached"),(0,t.endAdSession)(e)};t.initialiseAdSession=e=>{(0,r.dispatchApiData)(c.apiStore.get("apiFeed"),"event",[Object.assign({phase:o.AMTCustomEventPhase.AMT_CAPTURE_EVENTS},(0,r.getCustomEventDetailByAd)(e))]),window.setTimeout((0,t.adSessionTimeoutHandler)(e),1e3*n.config.eventCollection.maxSessionLengthSeconds)}},5763:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addResumeNotificationListener=t.addPauseNotificationListener=t.resumeNotificationHandler=t.removeSwappedAd=t.pauseNotificationHandler=void 0;const n=a(8771),i=a(2784),r=a(1371),o=a(9400),s=a(5221),d=a(850);t.pauseNotificationHandler=e=>{d.Logger.log.withScope("ad-swap",`ADSWAPPING - PAUSE EVENT NOTIFICATION, timestamp: ${(new Date).getTime()}, event detail: `,e.detail);const{impressionId:t}=e.detail;r.vpStore.actions.setAdTargetAdSwapStatus(t,i.AdSwapStatusEnum.PAUSED)};t.removeSwappedAd=e=>{const t=r.adStore.get("detectedAds").find(t=>t.id===e);if(d.Logger.log.withScope("ad-swap",`ADSWAPPING - REMOVING AD - ${e}: `,t),t){(0,o.captureEndEvent)(t,s.EndReason.AD_SWAP),(0,n.endAdSession)(t);const a=r.adStore.get("detectedAds").find(t=>t.id===e);d.Logger.log.withScope("ad-swap",`ADSWAPPING - REMOVED AD - ${e}: `,a)}};t.resumeNotificationHandler=e=>{d.Logger.log.withScope("ad-swap",`ADSWAPPING - RESUME EVENT NOTIFICATION, timestamp: ${(new Date).getTime()}, event detail: `,e.detail);const{swapped:a,impressionId:n}=e.detail;r.vpStore.actions.setAdTargetAdSwapStatus(n,i.AdSwapStatusEnum.RESUMED),a&&(0,t.removeSwappedAd)(n)};t.addPauseNotificationListener=e=>{e.addEventListener(i.AdSwapNotificationEnum.PAUSE,t.pauseNotificationHandler)};t.addResumeNotificationListener=e=>{e.addEventListener(i.AdSwapNotificationEnum.RESUME,t.resumeNotificationHandler)}},2731:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(i,r){function o(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}d((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchLatestSyntheticIntersectionEvents=t.cleanUpEventTimelines=t.batchDispatchIntervalEvents=t.addToManagedTimelineDispatch=t.batchDispatchSyntheticMeasureEvents=t.batchDispatchRawMeasurementEvents=t.getIntervalEventsPerAdForMode=t.dispatchMeasurementEventsInStoredBatch=t.dispatchMeasurementEventsByFlag=t.dispatchMeasurementEvents=t.INTERVAL_EVENTS_PER_AD_BY_MODE=t.DEFAULT_INTERVAL_EVENTS_PER_AD=t.MINIMUM_REQUEST_INTERVAL=void 0;const r=a(8370),o=i(a(5852)),s=a(5782),d=a(3956),c=a(8723),l=a(1371),u=a(850),p=a(3691),g=a(8528),{eventCollection:m}=s.config;t.MINIMUM_REQUEST_INTERVAL=1e3,t.DEFAULT_INTERVAL_EVENTS_PER_AD=15,t.INTERVAL_EVENTS_PER_AD_BY_MODE={[c.Mode.PAGE]:t.DEFAULT_INTERVAL_EVENTS_PER_AD,[c.Mode.CREATIVE]:t.DEFAULT_INTERVAL_EVENTS_PER_AD};const E=(e,t,a)=>()=>n(void 0,void 0,void 0,(function*(){return fetch(e,{method:"POST",body:JSON.stringify(a),headers:t,keepalive:!0})}));t.dispatchMeasurementEvents=e=>{var t,a;if(u.Logger.log.withScope("api","dispatching measurement events",e),!e.length)return;if(!m.enabled)return void("production"===d.Environment.DEVELOPMENT&&o.default.emit("event",JSON.stringify(e)));const n=l.creativeStore.get("advertiserExtCode"),i=n?`${m.apiUrl}/${n}`:m.apiUrl,r={Accepts:"application/json","Content-Type":"application/json","Amt-Event":m.token};if((0,g.retryOnError)(E(i,r,e),{wait:1e3,maxRetry:3}).then(()=>{u.Logger.log.withScope("api","dispatch events succeeded")}).catch(e=>{u.Logger.error.withScope("api","dispatch events retries failed:",e.message)}),l.vpStore.get("visionProjectClient")||l.vpStore.get("visionProjectEnvironment")){const n=null!==(t=l.vpStore.get("visionProjectClient"))&&void 0!==t?t:{version:"",client:""},i=null!==(a=l.vpStore.get("visionProjectEnvironment"))&&void 0!==a?a:"",o=`${m.panelStudyApiUrl}?client=${null==n?void 0:n.version}&environment=${i}`;(0,g.retryOnError)(E(o,r,e),{wait:1e3,maxRetry:3}).then(()=>{u.Logger.log.withScope("api","dispatch panel study events succeeded")}).catch(e=>{u.Logger.error.withScope("api","dispatch panel study events retries failed:",e.message)})}};t.dispatchMeasurementEventsByFlag=e=>{const a=l.apiStore.get("disableEventDispatch"),n=!!l.adStore.get("detectedAds").length;a?a&&n&&(u.Logger.log(`dispatching disabled, store the events with quantity: ${e.length} `,e),l.apiStore.actions.insertStoredBatch(e)):(0,t.dispatchMeasurementEvents)(e)};t.dispatchMeasurementEventsInStoredBatch=e=>{for(;l.apiStore.get("storedBatch").length>0;){const a=l.apiStore.actions.removeStoredBatch(e);u.Logger.log("dispatching the stored events in batches, total events in the batch: "+a.length),(0,t.dispatchMeasurementEvents)(a)}};t.getIntervalEventsPerAdForMode=e=>e&&t.INTERVAL_EVENTS_PER_AD_BY_MODE[e]||t.DEFAULT_INTERVAL_EVENTS_PER_AD;t.batchDispatchRawMeasurementEvents=()=>{const e=l.apiStore.actions.removeRawEvents(r.MAX_EVENTS_PER_REQUEST);(0,t.dispatchMeasurementEventsByFlag)(e)};t.batchDispatchSyntheticMeasureEvents=()=>{const e=l.apiStore.actions.removeSyntheticEvents(r.MAX_EVENTS_PER_REQUEST);(0,t.dispatchMeasurementEventsByFlag)(e)},t.addToManagedTimelineDispatch=(0,r.managedTimelineDispatch)(t.batchDispatchRawMeasurementEvents,t.batchDispatchSyntheticMeasureEvents,t.MINIMUM_REQUEST_INTERVAL,!0);t.batchDispatchIntervalEvents=()=>{const e=l.apiStore.get("intervalEventTimeline"),a=l.adStore.get("detectedAds").length*(0,t.getIntervalEventsPerAdForMode)(window.__amt_mode__);if(e.length>=a){const e=l.apiStore.actions.removeIntervalEvents(r.MAX_EVENTS_PER_REQUEST);(0,t.dispatchMeasurementEventsByFlag)(e)}};t.cleanUpEventTimelines=()=>{for(;l.apiStore.get("rawEventTimeline").length>0;){const e=l.apiStore.actions.removeRawEvents(r.MAX_EVENTS_PER_REQUEST);(0,t.dispatchMeasurementEvents)(e)}for(;l.apiStore.get("intervalEventTimeline").length>0;){const e=l.apiStore.actions.removeIntervalEvents(r.MAX_EVENTS_PER_REQUEST);(0,t.dispatchMeasurementEvents)(e)}for(;l.apiStore.get("syntheticEventTimeline").length>0;){const e=l.apiStore.actions.removeSyntheticEvents(r.MAX_EVENTS_PER_REQUEST);(0,t.dispatchMeasurementEvents)(e)}};t.dispatchLatestSyntheticIntersectionEvents=()=>{const e=(0,p.getSyntheticIntersectionEvents)();(0,t.dispatchMeasurementEvents)(e)}},8298:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkVpClient=void 0;const n=a(850),i=a(5352);t.checkVpClient=(e,t,a)=>{if(null===window.top)return a({warn:"Could not access top window."});(e=>-1!==e.indexOf("vision-project.xyz"))(null!=e?e:(0,i.getLocation)(window))&&(t("simulated-panel-study"),n.Logger.debug("Simulated panel study detected."));const r=new MessageChannel,o=window.setTimeout(()=>{r.port1.close(),a({warn:"VP Check timed out after 1000ms"})},1e3);r.port1.onmessage=e=>{var t;clearTimeout(o),r.port1.close(),a("object"==typeof(t=e.data)&&null!==t&&["client","version"].every(e=>"string"==typeof t[e])?{client:e.data.client,version:e.data.version}:{warn:"Vision Project client response malformed."})};try{window.top.postMessage({action:"inspect-vp-context"},"*",[r.port2])}catch(e){n.Logger.warn(e.message),a({warn:e.message})}}},4566:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllQueryParametersFromSrc=t.getAttributeValueFromSrc=t.getPathParamValueFromSrc=t.getCurrentScript=void 0;const n=a(850);t.getCurrentScript=e=>e.currentScript||Array.prototype.slice.call(e.scripts).find(e=>e.src.match("/amt"));t.getPathParamValueFromSrc=(e,t)=>{var a,n,i;return null!==(i=null===(n=null===(a=null==e?void 0:e.pathname)||void 0===a?void 0:a.match(t))||void 0===n?void 0:n[0])&&void 0!==i?i:null};t.getAttributeValueFromSrc=(e,t)=>e.queryParams.get(t);t.getAllQueryParametersFromSrc=e=>{try{const t=[];return e.queryParams.forEach((e,a)=>{t.push([a,e])}),t}catch(e){n.Logger.log("Failed to get query parameters from src - "+e.message)}return[]}},9704:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReferrerFromDcmIframeUrl=t.getReferrerFromDcmInsAttributes=t.getReferrerFromParams=t.getDcmInsIframeSrc=t.getDcmInsScriptElement=t.DCM_DATA_ATTRS=t.DCM_DATA_PARAM=t.DCM_IFRAME_TEST_HOST=t.DCM_SCRIPT_TEST_ATTR=void 0;const n=a(2319),i=a(850);t.DCM_SCRIPT_TEST_ATTR="data-dcm-rendering-mode",t.DCM_IFRAME_TEST_HOST="ad.doubleclick.net",t.DCM_DATA_PARAM="data-dcm-param",t.DCM_DATA_ATTRS=["referrer-xandr","referrer-ttd","referrer-dv360","referrer-mediamath","referrer-amobee"];t.getDcmInsScriptElement=e=>e.querySelector(`ins[${t.DCM_SCRIPT_TEST_ATTR}]`)||null;t.getDcmInsIframeSrc=e=>{if(!e)return null;let a=null;try{a=e.location&&e.location.href.indexOf(t.DCM_IFRAME_TEST_HOST)>-1?decodeURIComponent(e.location.href):null}catch(e){i.Logger.error("Unable to decode the url - "+e)}return a||null};t.getReferrerFromParams=e=>e.map(n.sanitiseReferrer).filter(e=>!!e)[0]||null;t.getReferrerFromDcmInsAttributes=e=>(0,t.getReferrerFromParams)(t.DCM_DATA_ATTRS.map(a=>e.getAttribute(`${t.DCM_DATA_PARAM}-${a}`)))||null;t.getReferrerFromDcmIframeUrl=e=>{const a=e.split(";").map(e=>{const a=e.split("=");return 2===a.length&&t.DCM_DATA_ATTRS.includes(a[0])?a[1]:null});return(0,t.getReferrerFromParams)(a)||null}},686:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isValidCampaign=t.getEntityInformation=t.ENTITY_ATTRIBUTES=t.LINE_ITEM_NAME_ATTRIBUTE=t.LINE_ITEM_ID_ATTRIBUTE=t.CAMPAIGN_ID_ATTRIBUTE=t.ORGANISATION_ID_ATTRIBUTE=t.CREATIVE_NAME_ATTRIBUTE=t.CREATIVE_ID_ATTRIBUTE=void 0,t.CREATIVE_ID_ATTRIBUTE="creative-id",t.CREATIVE_NAME_ATTRIBUTE="creative-name",t.ORGANISATION_ID_ATTRIBUTE="organisation-id",t.CAMPAIGN_ID_ATTRIBUTE="campaign-id",t.LINE_ITEM_ID_ATTRIBUTE="line-item-id",t.LINE_ITEM_NAME_ATTRIBUTE="line-item-name",t.ENTITY_ATTRIBUTES=[t.CREATIVE_ID_ATTRIBUTE,t.CREATIVE_NAME_ATTRIBUTE,t.ORGANISATION_ID_ATTRIBUTE,t.CAMPAIGN_ID_ATTRIBUTE,t.LINE_ITEM_ID_ATTRIBUTE,t.LINE_ITEM_NAME_ATTRIBUTE];t.getEntityInformation=e=>({creativeId:e.queryParams.get(t.CREATIVE_ID_ATTRIBUTE),creativeName:e.queryParams.get(t.CREATIVE_NAME_ATTRIBUTE),organisationId:e.queryParams.get(t.ORGANISATION_ID_ATTRIBUTE),campaignId:e.queryParams.get(t.CAMPAIGN_ID_ATTRIBUTE),lineItemId:e.queryParams.get(t.LINE_ITEM_ID_ATTRIBUTE),lineItemName:e.queryParams.get(t.LINE_ITEM_NAME_ATTRIBUTE)});const a=["0b53a56e-9da1-497b-a6bf-7fe07d6c457b","5aa05930-f5b0-11ec-9b47-5fd29029ceb2","6123fb40-f5b0-11ec-97c6-a1949c36bcfe","7b0703e0-1f1e-11ec-918f-c5932782ded0","0c296700-fead-11ec-b971-213b67261b0e","9bc56410-3142-11ec-8ad3-51c10deb97d5"];t.isValidCampaign=e=>!a.includes(e)},2004:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isApiStreamEnabled=t.isValidInternalDataVendor=t.getDataVendorAttribute=t.INTERNAL_DATA_VENDORS=t.DATA_VENDOR_ATTRIBUTE=void 0;const n=a(3956),i=a(4566),r=a(2872);t.DATA_VENDOR_ATTRIBUTE="data-vendor",t.INTERNAL_DATA_VENDORS=["vision-project"];t.getDataVendorAttribute=e=>{if(e){const a=document.createElement("script");a.setAttribute("src",e);const n=(0,r.createAmtDomScript)(a);return(0,i.getAttributeValueFromSrc)(n,t.DATA_VENDOR_ATTRIBUTE)}return null};t.isValidInternalDataVendor=e=>!(!e||!e.name)&&t.INTERNAL_DATA_VENDORS.indexOf(e.name)>=0;t.isApiStreamEnabled=e=>{const a=(0,i.getCurrentScript)(document),r=a?a.getAttribute("src"):null,o={name:(0,t.getDataVendorAttribute)(r)};return e===n.Environment.STAGING||e===n.Environment.DEVELOPMENT||e===n.Environment.TESTING||(0,t.isValidInternalDataVendor)(o)}},2815:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.adSwapEventMap=void 0;const n=a(8714);t.adSwapEventMap={"amt:adswap:end":e=>({id:e.id,timestamp:Date.now(),type:n.EventType.END_EVENT,endReason:e.endReason})}},7471:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalEventFactory=void 0;const n=a(7258),i=a(9417),r=a(5756),o=a(4352),s=a(2815),d=Object.assign(Object.assign(Object.assign(Object.assign({},i.loadEventMap),r.measureEventMap),o.metadataEventMap),s.adSwapEventMap);t.globalEventFactory=new n.Factory({constructors:d})},9417:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadEventMap=void 0;const n=a(8714),i=a(5352),r=a(2619),o=a(1371),s=a(4593),d=a(8723),c=e=>{var t,a,i,r,o,s,d,c,l,u,p;return{id:e.ad.id,timestamp:Date.now(),timeOffset:-(new Date).getTimezoneOffset(),type:n.EventType.LOAD_EVENT,mode:e.mode,pageAccess:e.pageAccess,referrer:e.referrer,format:e.ad.format,instantiationTimestamp:e.instantiationTimestamp,entities:null!==(t=e.entities)&&void 0!==t?t:null,adDimensions:e.adDimensions,windowDimensions:{width:e.topWindow.outerWidth,height:e.topWindow.outerHeight},screenDimensions:{height:e.topWindow.screen.height,width:e.topWindow.screen.width},viewport:null!==(a=e.viewport)&&void 0!==a?a:null,amtVersion:"1.35.0",dataVendor:null!==(i=e.dataVendor)&&void 0!==i?i:null,dataAttributes:null!==(r=e.customMacroValues)&&void 0!==r?r:null,creativeModeAttributes:null!==(o=e.creativeModeAttributes)&&void 0!==o?o:null,sampleRate:null!==(s=e.sampleRate)&&void 0!==s?s:null,tag:null!==(d=e.tag)&&void 0!==d?d:null,isSwapped:null!==(c=e.isSwapped)&&void 0!==c&&c,richMediaVendor:null!==(l=e.richMediaVendor)&&void 0!==l?l:null,part:null!==(u=e.part)&&void 0!==u?u:null,groupKey:null!==(p=e.groupKey)&&void 0!==p?p:null}};t.loadEventMap={"amt:load:page":e=>{const t=(0,i.getLocation)(window),a=e.ad.getAdDimensions(),n=(0,r.getViewportDimensions)(window),l=o.creativeStore.get("tagSamplingAttributes"),u=e.tag?(0,s.getUpdatedTagInCapturing)(e.tag,l):null;return c({ad:e.ad,mode:d.Mode.PAGE,topWindow:window,pageAccess:!0,entities:e.entities,customMacroValues:e.customMacroValues,instantiationTimestamp:e.instantiationTimestamp,dataVendor:e.dataVendor,adDimensions:a,viewport:n,referrer:t,creativeModeAttributes:e.creativeModeAttributes,sampleRate:e.sampleRate,tag:u})},"amt:load:creative":e=>{var t,a,n,l,u;const p=e.ad.topMostAccessibleFrameWindow,g=e.ad.getAdDimensions(),m=(0,r.getViewportForCreative)(window,p),E="playgroundxyz"===(null===(t=e.richMediaParams)||void 0===t?void 0:t.richMediaVendor)&&e.ad.target.hasAttribute("vp-target-ad"),v=o.creativeStore.get("tagSamplingAttributes"),_=e.tag?(0,s.getUpdatedTagInCapturing)(e.tag,v):null,A=null!==(n=null===(a=e.requiredMacros)||void 0===a?void 0:a.referrer)&&void 0!==n?n:(0,i.getLocation)(window);return c({ad:e.ad,mode:d.Mode.CREATIVE,topWindow:p,pageAccess:e.ad.pageAccess,entities:e.entities,customMacroValues:e.customMacroValues,instantiationTimestamp:e.instantiationTimestamp,dataVendor:e.dataVendor,adDimensions:g,viewport:m,referrer:A,sampleRate:e.sampleRate,tag:_,isSwapped:E,richMediaVendor:null===(l=e.richMediaParams)||void 0===l?void 0:l.richMediaVendor,part:null===(u=e.richMediaParams)||void 0===u?void 0:u.richMediaPart,groupKey:e.groupKey})}}},5756:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.measureEventMap=void 0;const n=a(8714),i=a(6262),r=a(2377);t.measureEventMap={"amt:measure:gaze":e=>{var t,a,i,r,o,s,d;return{id:e.id,timestamp:e.timestamp,type:n.EventType.MEASURE_EVENT,gaze:{inGaze:e.inGaze,gazeVendor:null!==(t=e.gazeVendor)&&void 0!==t?t:null,coordinates:{x:null!==(a=e.x)&&void 0!==a?a:null,y:null!==(i=e.y)&&void 0!==i?i:null},gazeIdentifiers:e.gazeIdentifiers?{pageId:null!==(r=e.gazeIdentifiers.pageId)&&void 0!==r?r:null,userId:null!==(o=e.gazeIdentifiers.sessionId)&&void 0!==o?o:null,sessionId:null!==(s=e.gazeIdentifiers.sessionId)&&void 0!==s?s:null,feedId:null!==(d=e.gazeIdentifiers.feedId)&&void 0!==d?d:null}:null},browsingFeatures:{adLocation:e.adLocation}}},"amt:measure:browsing-features":e=>{var t;return{id:e.id,type:n.EventType.MEASURE_EVENT,timestamp:null!==(t=e.timestamp)&&void 0!==t?t:Date.now(),browsingFeatures:e.browsingFeatures}},"amt:measure:inview":e=>{var t;const{ad:a,timestamp:o,inView:s,richMediaParams:d}=e,c=null!==(t=null==d?void 0:d.richMediaFormat)&&void 0!==t?t:null,{target:l,topMostAccessibleFrameWindow:u}=a,p=(0,i.getAdFormat)({richMediaFormat:c,target:l,window:u}),g=a.getAdDimensions(),m=(0,r.getWindowDimensions)(u);return{id:a.id,type:n.EventType.MEASURE_EVENT,timestamp:null!=o?o:Date.now(),format:p,inView:s,adDimensions:g,windowDimensions:m}}}},4352:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metadataEventMap=void 0;const n=a(8714);t.metadataEventMap={"amt:metadata:vision-project-metadata":e=>({id:e.id,type:n.EventType.VISION_PROJECT_METADATA_EVENT,timestamp:Date.now(),visionProjectMetadata:e.vpMetadata})}},1771:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.doRectanglesIntersect=void 0;t.doRectanglesIntersect=(e,t)=>e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},5686:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalEventBus=void 0;const n=a(8063);t.globalEventBus=n.busFactory.create("global")},1371:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.creativeStore=t.systemStore=t.measurementStore=t.vpStore=t.adStore=t.apiStore=void 0;const n=a(9809),i=n.storeFactory.create("api");t.apiStore=i;const r=n.storeFactory.create("ad");t.adStore=r;const o=n.storeFactory.create("visionProject");t.vpStore=o;const s=n.storeFactory.create("measurement");t.measurementStore=s;const d=n.storeFactory.create("system");t.systemStore=d;const c=n.storeFactory.create("creative");t.creativeStore=c},7995:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hashString=void 0;t.hashString=e=>e.split("").map(e=>e.charCodeAt(0)).reduce((e,t)=>e+((e<<7)+(e<<3))^t).toString(16).replace("-","X")},6754:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTopMostAccessibleParentIframeWindow=t.getDeepestAvailableHTMLContent=t.createHtmlTree=t.getHTMLContentFromIframe=t.findAllAds=t.findSupportedAds=t.filterIframes=t.findIframes=t.filterIframesForSupportedAds=t.iframeSizeComparison=t.getIframeDimensions=void 0;const n=a(2955),i=a(8723),r=a(850);t.getIframeDimensions=e=>{const t=e.getBoundingClientRect();return{height:Math.round(t.height)||e.offsetHeight||e.clientHeight||0,width:Math.round(t.width)||e.offsetWidth||e.clientWidth||0}};t.iframeSizeComparison=(e,a)=>{const r=(0,t.getIframeDimensions)(e);if(!a.enabled)return!1;const o=window.__amt_mode__===i.Mode.CREATIVE&&a.tolerance||n.SIZE_TOLERANCE,s=e=>Math.max(e,10);return r.width>=s(a.width-o)&&r.width<=a.width+o&&r.height>=s(a.height-o)&&r.height<=a.height+o};t.filterIframesForSupportedAds=e=>e.filter(e=>n.supportedIABAdFormats.some(a=>(0,t.iframeSizeComparison)(e,a)));t.findIframes=e=>Array.from(e.document.getElementsByTagName("iframe"));t.filterIframes=e=>Array.from(e).filter(e=>"IFRAME"===e.nodeName);t.findSupportedAds=e=>(0,t.filterIframesForSupportedAds)((0,t.findIframes)(e));t.findAllAds=e=>(0,t.findIframes)(e);t.getHTMLContentFromIframe=e=>{var t;return(null===(t=e.contentWindow)||void 0===t?void 0:t.document.documentElement.outerHTML)||null};t.createHtmlTree=(e,a,n=0)=>{const i=(0,t.getHTMLContentFromIframe)(a),{contentWindow:r}=a;if(i&&r){e[n]=e[n]?e[n].concat(i):[i];const a=(0,t.findSupportedAds)(r),o=n+1;return a.reduce((e,a)=>(0,t.createHtmlTree)(e,a,o),e)}return e};t.getDeepestAvailableHTMLContent=e=>{try{const a=(0,t.createHtmlTree)([],e);return a[a.length-1][0]}catch(a){return r.Logger.error("Unable to access iframe content - "+a.message,a),(0,t.getHTMLContentFromIframe)(e)}};t.getTopMostAccessibleParentIframeWindow=e=>{if(!!!e.frameElement||e.top===e.parent)return e;const a=e.parent;return(0,t.getTopMostAccessibleParentIframeWindow)(a)}},6083:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isInjectedAmt=t.INJECTED_ATTR=void 0,t.INJECTED_ATTR="injectedAmt";t.isInjectedAmt=e=>!(!e||"true"!==e.getAttribute(t.INJECTED_ATTR))},9590:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.instantiateIntersectionObserver=t.getThresholdForMode=t.getIntersectionObserverOptions=t.generateThresholds=t.calculateThresholdEntry=t.DEFAULT_TOTAL_ENTRIES=void 0;const n=a(1371);t.DEFAULT_TOTAL_ENTRIES=1001;t.calculateThresholdEntry=(e,t)=>e/(t-1);t.generateThresholds=e=>new Array(e).fill(void 0).map((e,a,n)=>(0,t.calculateThresholdEntry)(a,n.length));t.getIntersectionObserverOptions=e=>({root:null,rootMargin:"0px",threshold:e});t.getThresholdForMode=e=>(0,t.generateThresholds)(t.DEFAULT_TOTAL_ENTRIES);t.instantiateIntersectionObserver=(e,a,i)=>{if(window.IntersectionObserver){if(n.adStore.get("detectedAds").find(e=>e.id===a.id)){const r=(0,t.getIntersectionObserverOptions)((0,t.getThresholdForMode)(i)),o=new IntersectionObserver(e,r);n.measurementStore.actions.insertIntersectionObserver(a,o),o.observe(a.target)}}}},6001:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogDispatcher=t.AMT_TOKEN_HEADER=void 0;const n=a(850);t.AMT_TOKEN_HEADER="Amt-Event";t.LogDispatcher=class{constructor(e){this.init=()=>{this.eventBus.subscribe("log:dispatch",this.onLog)},this.onLog=e=>{var a;const i=[{scriptName:"AMT",scriptVersion:"1.35.0",message:e.message,level:null!==(a=e.level)&&void 0!==a?a:"info"}];fetch(this.apiUrl,{method:"POST",body:JSON.stringify(i),headers:{Accepts:"application/json","Content-Type":"application/json",[t.AMT_TOKEN_HEADER]:this.apiToken},keepalive:!0}).catch(e=>{n.Logger.error(e.message)})},this.eventBus=e.eventBus,this.apiToken=e.apiToken,this.apiUrl=e.apiUrl}}},850:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const n=a(5628);class i{}t.Logger=i,i.emitLogMessage=(e,...t)=>{if(0===t.length)return;const{scope:a,logLevel:n}=e},i.logFor=e=>{const t=(...t)=>i.emitLogMessage({logLevel:e},...t);return t.withScope=(t,...a)=>i.emitLogMessage({logLevel:e,scope:t},...a),t},i.debug=i.logFor(n.LOG_LEVEL.DEBUG),i.log=i.logFor(n.LOG_LEVEL.LOG),i.info=i.logFor(n.LOG_LEVEL.INFO),i.warn=i.logFor(n.LOG_LEVEL.WARN),i.error=i.logFor(n.LOG_LEVEL.ERROR)},2319:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTagConfigFromEventCollectionCache=t.processTagConfigResponse=t.handleAdSessionBySampling=t.getTag=t.parseTagAutoId=t.splitTagLabel=t.getTagAttributes=t.getAllPlatformMacros=t.getCustomPlatformMacroValues=t.getCommonPlatformMacrosValues=t.sanitiseReferrer=t.isSubstitutedUrl=t.REFERRER_MACROS=t.DATA_VENDOR_ATTRIBUTES=t.RICH_MEDIA_ATTRIBUTES=t.AD_REMOVAL_TIMEOUT=t.AD_REMOVAL_INTERVAL=t.TAG_CONFIG_REQUEST_TIMEOUT=t.TAG_CODE_PARAM_REGEX=t.REQUIRED_TAG_ATTRIBUTES=t.TAG_ID_KEY=t.TAG_LABEL_KEY=t.ADVERTISER_ENTITY_KEY=t.EXTERNAL_ENTITY_MACRO_PREFIX=t.REQUIRED_CREATIVE_MACRO_ATTRIBUTES=t.REFERRER=void 0;const n=a(686),i=a(4566),r=a(9704),o=a(1630),s=a(1371),d=a(8771),c=a(2731),l=a(5782),u=a(4593),p=a(8370),g=a(850);t.REFERRER="referrer",t.REQUIRED_CREATIVE_MACRO_ATTRIBUTES=[t.REFERRER],t.EXTERNAL_ENTITY_MACRO_PREFIX="attr",t.ADVERTISER_ENTITY_KEY=t.EXTERNAL_ENTITY_MACRO_PREFIX+"Advertiser",t.TAG_LABEL_KEY="tagLabel",t.TAG_ID_KEY="tagId",t.REQUIRED_TAG_ATTRIBUTES=[t.TAG_LABEL_KEY,t.TAG_ID_KEY],t.TAG_CODE_PARAM_REGEX=/[0-9]{1,10}-[a-zA-Z0-9]{8}/,t.TAG_CONFIG_REQUEST_TIMEOUT=7e3;const{macroTag:{defaultConfig:{global:{sampleRate:m}}}}=l.config;t.AD_REMOVAL_INTERVAL=1e3,t.AD_REMOVAL_TIMEOUT=2e4;const E={"23-0c594350":1,"24-5c5619a0":1,"47-60483ff0":1,"71-5aa35650":1,"48-bc9cad70":1,"76-e64f9dc0":.1};t.RICH_MEDIA_ATTRIBUTES=["richMediaFormat","richMediaPart","richMediaVendor"],t.DATA_VENDOR_ATTRIBUTES=["data-vendor"],t.REFERRER_MACROS=["${REFERER_URL_ENC}","${SOURCE_URL_ENC}","%%TTD_SITE_WITH_PATH%%","%%PATTERN:url%%","[BID_ATTR.page_url]","$!{SITE_URL}","!{REFERRER_ENC}"];const v=[...t.REQUIRED_CREATIVE_MACRO_ATTRIBUTES,...n.ENTITY_ATTRIBUTES,...t.REQUIRED_TAG_ATTRIBUTES,...t.RICH_MEDIA_ATTRIBUTES,...t.DATA_VENDOR_ATTRIBUTES];t.isSubstitutedUrl=e=>-1===t.REFERRER_MACROS.indexOf(e);t.sanitiseReferrer=e=>{if(e&&(0,t.isSubstitutedUrl)(e))try{return decodeURIComponent(e)}catch(e){g.Logger.error("macro","Failed to parse url - "+e.message)}return null};t.getCommonPlatformMacrosValues=e=>{if(e.srcString){const a=(0,i.getAttributeValueFromSrc)(e,t.REFERRER),n=(0,t.sanitiseReferrer)(a);if(n)return{referrer:n}}const a=(0,r.getDcmInsScriptElement)(document);if(a){return{referrer:(0,r.getReferrerFromDcmInsAttributes)(a)}}const n=(0,r.getDcmInsIframeSrc)(window);if(n){return{referrer:(0,r.getReferrerFromDcmIframeUrl)(n)}}return{referrer:null}};t.getCustomPlatformMacroValues=e=>(0,i.getAllQueryParametersFromSrc)(e).filter(([e])=>-1===v.indexOf(e)).reduce((e,[t,a])=>Object.assign(Object.assign({},e),{[t]:a}),{});t.getAllPlatformMacros=e=>{if(!e.srcString)return{common:{referrer:null},custom:{}};return{common:(0,t.getCommonPlatformMacrosValues)(e),custom:(0,t.getCustomPlatformMacroValues)(e)}};t.getTagAttributes=e=>({code:(0,i.getPathParamValueFromSrc)(e,t.TAG_CODE_PARAM_REGEX),label:(0,i.getAttributeValueFromSrc)(e,t.TAG_LABEL_KEY)});t.splitTagLabel=e=>{if(!e)return{name:null,platform:null};const t=e.split("_"),a=t.length-1,n=t[t.length-1];return{name:t.splice(0,a).join("_"),platform:n}};t.parseTagAutoId=e=>{const t=parseInt(e[0],10),a=Number.isNaN(t)?null:t;return a||g.Logger.error("macro","Unable to parse the tag key auto id as a number"),a};t.getTag=(e,a,n)=>{if(!e||!e.code||!e.label)return null;const i=e.code.split("-");if(2!==i.length)return null;const r=(0,t.parseTagAutoId)(i);if(!r)return null;const s=e.code,d=(0,t.splitTagLabel)(e.label);return Object.assign({id:r,code:s,platform:d.platform,label:d.name},(0,o.getTagSampleRate)(a,n))};t.handleAdSessionBySampling=(e,a,n=!1)=>{if((0,o.applyTagSampling)(e)){g.Logger.log.withScope("macro","Sampling Passed!");const t=s.apiStore.get("storedBatch");n&&t.length&&(0,u.updateLoadEventInStoredBatch)(t,e,a),s.apiStore.set("disableEventDispatch",!1),(0,c.dispatchMeasurementEventsInStoredBatch)(p.MAX_EVENTS_PER_REQUEST)}else{let e,a;g.Logger.log.withScope("macro","impression not captured for macro tag sampling!"),s.apiStore.set("storedBatch",[]),e=window.setInterval(()=>{g.Logger.log.withScope("macro","Attempt to remove ad....");const t=s.adStore.get("detectedAds"),n=t.length?t[0]:null;n&&((0,d.endAdSession)(n),g.Logger.log.withScope("macro","Ad removed...."),window.clearTimeout(a),window.clearInterval(e))},t.AD_REMOVAL_INTERVAL),a=window.setTimeout(()=>{window.clearInterval(e)},t.AD_REMOVAL_TIMEOUT)}};t.processTagConfigResponse=(e,a)=>{const{tagConfig:n=null,statusCode:i=null}=e||{};if(g.Logger.log.withScope("macro","Retrieved the Macro Tag Config from Event Collection Cache:",n),i&&200===i&&n){const{sampleRate:e,overriddenByEntity:i}=(0,o.getTagSampleRate)(n,a);s.creativeStore.set("tagSamplingAttributes",{sampleRate:e,overriddenByEntity:i});const r=!0;(0,t.handleAdSessionBySampling)(e,i,r)}else if(i&&i>=300){const e=m,a=!1;(0,t.handleAdSessionBySampling)(e,a)}};t.getTagConfigFromEventCollectionCache=(e,a)=>{if(e in E){const a=E[e],n=!1,i=!0;return s.creativeStore.set("tagSamplingAttributes",{sampleRate:a,overriddenByEntity:n}),void(0,t.handleAdSessionBySampling)(a,n,i)}const n=l.config.eventCollection.token?{"Amt-Event":l.config.eventCollection.token}:{},i=new AbortController,r=setTimeout(()=>{i.abort(),g.Logger.error("Timeout occurred when retrieving the Macro Tag Config from Event Collection Cache"),(0,t.handleAdSessionBySampling)(m,!1)},t.TAG_CONFIG_REQUEST_TIMEOUT);return fetch(`${l.config.macroTag.apiUrl}/${e}`,{method:"GET",headers:n,signal:i.signal}).then(e=>(clearTimeout(r),e.json())).then(e=>(0,t.processTagConfigResponse)(e,a)).catch(()=>{g.Logger.error("Error occurred when retrieving the Macro Tag Config from Event Collection Cache"),(0,t.handleAdSessionBySampling)(m,!1)})}},8370:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.managedTimelineDispatch=t.MAX_EVENTS_PER_REQUEST=void 0;const n=a(3691),i=a(1371);t.MAX_EVENTS_PER_REQUEST=100;t.managedTimelineDispatch=(e,a,r,o)=>{let s,d,c=o,l=r;return()=>{const o=()=>{l*=1.5;const e=(0,n.getSyntheticIntersectionEvents)();e&&e.length&&(d=window.setTimeout(o,l),i.apiStore.actions.insertSyntheticEvents(e),a())};if(c)return(0,n.updateLatestIntersectionEventPerImpression)(),c=!1,void e();[s,d].map(e=>e&&window.clearTimeout(e));if(i.apiStore.get("rawEventTimeline").length>=t.MAX_EVENTS_PER_REQUEST)return(0,n.updateLatestIntersectionEventPerImpression)(),void e();s=window.setTimeout(()=>{s=null,d=null,l=r,(0,n.updateLatestIntersectionEventPerImpression)(),d=window.setTimeout(o,l),e()},r)}}},9716:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0;t.MathUtils=class{static isIntersecting(e,t){return void 0!==e.x&&void 0!==e.y&&(e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)}}},8142:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAdSwapMutationHandler=t.isAdSwappedMutation=t.MINI_PLAYER_MUTATION_OBSERVER_CONFIG=t.AD_SWAP_MUTATION_OBSERVER_CONFIG=t.DEFAULT_MUTATION_OBSERVER_CONFIG=void 0;const n=a(6754),i=a(2505),r=a(850);t.DEFAULT_MUTATION_OBSERVER_CONFIG={attributes:!1,childList:!0,subtree:!0},t.AD_SWAP_MUTATION_OBSERVER_CONFIG={attributes:!0,childList:!0,subtree:!0,attributeFilter:["srcdoc","src"]},t.MINI_PLAYER_MUTATION_OBSERVER_CONFIG={attributes:!0,childList:!0,subtree:!0,attributeFilter:["active"]};t.isAdSwappedMutation=e=>{const{attributeName:t,target:a,type:n}=e;return"attributes"===n&&"srcdoc"===t&&"IFRAME"===a.nodeName};t.createAdSwapMutationHandler=(e,a,o,s)=>(d,c)=>{for(const l of d)if((0,t.isAdSwappedMutation)(l)){const{type:t,attributeName:d,target:u}=l;r.Logger.log(`Ad swap mutation detected with mutation type: ${t} and attributeName: ${d}`),r.Logger.log("Ad swap target detected: ",u);const p=(0,n.filterIframesForSupportedAds)([u]);if(0===p.length)return;(0,i.attachLoadedAds)(p,e,a,o,s),c.disconnect();break}}},7217:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pollFor=void 0;t.pollFor=(e,t,a,n)=>{var i,r;const o=100,s=1e3;let d,c;d=window.setInterval(()=>{e()&&(clearInterval(d),clearTimeout(c),t())},null!==(i=null==n?void 0:n.interval)&&void 0!==i?i:o),c=window.setTimeout(()=>{clearInterval(d),a()},null!==(r=null==n?void 0:n.maxWaitTime)&&void 0!==r?r:s)}},9939:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRichMediaQueryParams=t.isDesktopPXYZAdFrame=t.XYZ_AD_IFRAME=void 0;const n=a(539);t.XYZ_AD_IFRAME="xyz-ad-iframe";t.isDesktopPXYZAdFrame=e=>e.parent.name===t.XYZ_AD_IFRAME;t.getRichMediaQueryParams=e=>({richMediaFormat:e.queryParams.get(n.RichMediaAttributes.RICH_MEDIA_FORMAT),richMediaPart:e.queryParams.get(n.RichMediaAttributes.RICH_MEDIA_PART),richMediaVendor:e.queryParams.get(n.RichMediaAttributes.RICH_MEDIA_VENDOR)})},8528:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(i,r){function o(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.retryOnError=void 0;const i=a(850);t.retryOnError=(e,{maxRetry:t=1,wait:a}={})=>n(void 0,void 0,void 0,(function*(){for(let n=0;n<=t;n++)try{const t=yield e();if(!t.ok)throw new Error(`HTTP error: ${t.status} - ${t.statusText}`);return n>0&&i.Logger.log.withScope("retry","succeeded at retry "+n),t}catch(e){if(i.Logger.error.withScope("retry",`failed at retry ${n}, ${n===t?"throwing":"retrying"}`),n===t)throw e;a&&(yield new Promise(e=>{setTimeout(e,a)}))}}))},1630:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTagSampleRate=t.capitaliseEntityTypes=t.getSampleRateForPage=t.getSampleRateForCreative=t.applyTagSampling=t.applySampling=t.getRandomNumber=t.isNumber=t.TAG_SAMPLING_DECIMAL_PLACES=t.INTERNAL_DATA_VENDOR_SAMPLE_RATE=void 0;const n=a(2319),i=a(850);t.INTERNAL_DATA_VENDOR_SAMPLE_RATE=100,t.TAG_SAMPLING_DECIMAL_PLACES=3;t.isNumber=e=>"number"==typeof e&&!Number.isNaN(e);t.getRandomNumber=(e,t,a=0)=>{if(0===a)return Math.floor(Math.random()*(t-e+1)+e);const n=Math.random()*(t-e)+e;return parseFloat(n.toFixed(a))};t.applySampling=e=>!(0,t.isNumber)(e)||(0,t.getRandomNumber)(1,100)<=e;t.applyTagSampling=e=>{if((0,t.isNumber)(e)){const a=100*e,n=(0,t.getRandomNumber)(1,100,t.TAG_SAMPLING_DECIMAL_PLACES);return i.Logger.log(`Applying tag sampling with random number: ${n}, and sample rate: ${a}`),n<=a}return!0};t.getSampleRateForCreative=(e,t)=>{const a=Object.keys(e).find(e=>e===(null==t?void 0:t.lineItemId));return a?e[a].sampleRate:null};t.getSampleRateForPage=e=>"number"==typeof e?e:null;t.capitaliseEntityTypes=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`;t.getTagSampleRate=(e,a)=>{const{overrides:i,global:{sampleRate:r}}=e;if(!i)return{overriddenByEntity:!1,sampleRate:r};const o=a&&Object.entries(i).flatMap(([e,i])=>i.map(({targetId:i,sampleRate:r})=>a[`${n.EXTERNAL_ENTITY_MACRO_PREFIX}${(0,t.capitaliseEntityTypes)(e)}`]===i&&r)).find(t.isNumber),s="number"==typeof o;return{overriddenByEntity:s,sampleRate:s?o:r}}},2872:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAmtDomScript=void 0;const n=a(850),i=e=>{const t={},a=e.length;for(let n=0;n<a;n++){const a=e.item(n),i=null==a?void 0:a.name;i&&(t[i]=null==a?void 0:a.value)}return t};t.createAmtDomScript=e=>{const t=e.getAttribute("src")||null,a=(e=>{try{return new URL(e)}catch(e){return n.Logger.error("Failed to get URL from src - "+e.message),null}})(t||"");return{element:e,srcString:t,queryParams:a?a.searchParams:new URLSearchParams,attributes:i(e.attributes),pathname:a?a.pathname:null}}},5765:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCreativeModeAttributes=t.addCreativeIdAttributeToAdTarget=t.ID_ATTRIBUTE=void 0;const n=a(850);t.ID_ATTRIBUTE="attention-creative-id";t.addCreativeIdAttributeToAdTarget=(e,a)=>{try{e.setAttribute(t.ID_ATTRIBUTE,a)}catch(e){n.Logger.error("Unable to set the attribute")}};t.getCreativeModeAttributes=e=>{try{return{id:e.getAttribute(t.ID_ATTRIBUTE)}}catch(e){return n.Logger.error("Unable to retrieve the attributes"),null}}},2257:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTimestamp=void 0;t.getCurrentTimestamp=()=>(new Date).getTime()},4733:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUUID4=t.uuidv4=void 0;t.uuidv4=()=>window.crypto?String([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});t.isUUID4=e=>/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)},9035:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.waitForBodyElement=void 0;t.waitForBodyElement=()=>new Promise(e=>{if(document.body)e();else{const t=new MutationObserver(()=>{document.body&&(t.disconnect(),e())});t.observe(document.documentElement,{childList:!0})}})},297:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasPageAccess=t.isTopWindow=void 0;t.isTopWindow=e=>e.top===e.self;t.hasPageAccess=e=>{if((0,t.isTopWindow)(e))return!0;try{return!!e.top&&!!e.top.location.hostname}catch(e){return!1}}},1519:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAdInitialZone=t.instantiateZoneCheckingInterval=t.getZoneForAdTarget=t.createTargetZone=t.ZONE_CHECKING_INTERVAL=void 0;const n=a(2619),i=a(1771),r=a(7656),o=a(1371);t.ZONE_CHECKING_INTERVAL=100;t.createTargetZone=e=>({top:-20,bottom:e.height+20,left:-20,right:e.width+20,height:e.height+40,width:e.width+40,x:-20,y:-20});t.getZoneForAdTarget=(e,a)=>(0,i.doRectanglesIntersect)((0,t.createTargetZone)(a&&a.top?(0,n.getViewportDimensions)(a.top):{width:0,height:0}),e.getBoundingClientRect())?r.Zone.TARGET_ZONE:r.Zone.ZONE_2;t.instantiateZoneCheckingInterval=()=>window.setInterval(()=>{const e=o.adStore.get("detectedAds").map(e=>(e.zone=(0,t.getZoneForAdTarget)(e.target,e.topMostAccessibleFrameWindow),e));o.adStore.set("detectedAds",e)},t.ZONE_CHECKING_INTERVAL);t.getAdInitialZone=e=>e.pageAccess?(0,t.getZoneForAdTarget)(e.target,e.topMostAccessibleFrameWindow):null}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}(()=>{const e=a(8903),t=a(9035);document.body?e.app.run(window):(0,t.waitForBodyElement)().then(()=>e.app.run(window))})()})();